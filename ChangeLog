2001-08-02  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-make-form-data): Fixed typo.
	(w3m-form-input-file): Rewrite.

2001-08-02  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-add-referer): New option.
	(w3m-goto-url): When `w3m-add-referer' equals nil, no reference
	information is given to `w3m-exec'.

	* README, README.ja: Update documents for required version of w3m.

	* w3m-0.2.1-mnc.patch: Removed.

	* w3m.el (TOP): Add autoload for w3m-namazu.

	* w3m-namazu.el: New file.

2001-08-01  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-w3m-retrieve): Bind coding-system-for-write as 'binary.

	* w3m-form.el (w3m-form-make-form-data): New function.
	(w3m-form-make-form-urlencoded): Eliminated.
	(w3m-fontify-forms): Added 'file' input processing.
	(w3m-form-input-file): New function.
	(w3m-form-input-textarea-keymap): Bind "\C-c\C-k" as well.
	(w3m-form-input-select-keymap): Ditto.
	(w3m-form-input-map-keymap): Ditto.
	(w3m-form-submit): Call `w3m-form-make-form-data' instead of
	`w3m-form-make-form-urlencoded'.

2001-07-31  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el: Applied patch [emacs-w3m: 01330].
	(w3m-exec-filter): Changed regexp for authentication realm.

	* w3m.el (w3m-toggle-inline-images): Set `referer' argument of
	`w3m-create-image'.

	* w3m-e21.el (w3m-create-image): Added argument `referer'.

	* w3m-xmas.el (w3m-create-image): Ditto.

	* w3m-form.el (w3m-form-submit): Set `referer' argument of
	w3m-goto-url.

	* w3m.el (w3m-w3m-retrieve): Make a temporary file for POST;
	Use -header option to specify Content-Type: field.
	(w3m-w3m-retrieve): Added argument `referer';
	Add -header option to specify Referer: field.
	(w3m-retrieve): Added argument `referer'.
	(w3m-exec): Ditto.
	(w3m-goto-url): Ditto.
	(w3m-view-this-url): Set `referer' argument of w3m-goto-url.

2001-07-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-make-help-echo): For FSF Emacs 21, specify the third
	argument of `get-text-property' where the buffer is to be checked;
	for XEmacs, make it not to work if the buffer is not focused.
	(w3m-make-balloon-help): Make it not to work if the buffer is not
	focused.

2001-07-27  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-parse-forms): Fixed for initial value in the
	textarea.

2001-07-27  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-form.el (w3m-form-input-textarea-exit): New function.
	(w3m-form-input-select-exit): Ditto.
	(w3m-form-input-map-exit): Ditt.
	(w3m-form-input-textarea-keymap): Add key for 'exit'.
	(w3m-form-input-select-keymap): Ditto.
	(w3m-form-input-map-keymap): Ditto.
	(w3m-form-input-textarea-mode): Modify doc-string.
	(w3m-form-input-select-mode): Ditto.
	(w3m-form-input-map-mode): Ditto.
	(w3m-form-input-select-set-mouse): Add doc-string.
	(w3m-form-input-map-set-mouse): Ditto.

2001-07-26  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-x-moe-decode-buffer): Use 'w3m-coding-system'
	instead of 'euc-jp.
	(w3m-w32-browser-with-fiber): Ignore process output.

	* w3m-form.el (w3m-form-mouse-face): New user option.
	(w3m-form-input-select): Add mouse-face.
	(w3m-form-input-map): Ditto.

	* mew-w3m.el (toplevel): Require 'cl, when byte-compile.
	(mew-mime-text/html-w3m): Guess charset with the use of the Mew's
	funcion and use its charset, if executed a combination of Mew
	Ver.2 and w3m-m17n.

2001-07-25  NAKAGAWA Takayuki  <tknakaga@kanagawa.hitachi.co.jp>

	* w3m.el (w3m-fontify-anchors): Don't delete trailing whitespaces,
	etc. from anchors.

2001-07-23  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-asahi.el (shimbun-asahi-groups): Added "culture".
	* shimbun/sb-asahi-html.el (shimbun-asahi-html-groups): Ditto.

2001-07-19  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-form.el (w3m-form-parse-forms): Support the USEMAP attribute
	of the IMG element.
	(w3m-fontify-forms): Ditto.
	(w3m-form-input-textarea-wincfg): New buffer local variable.
	(w3m-form-input-select-wincfg): Ditto.
	(w3m-form-input-textarea): Save the configuration of current window.
	Guard error of the minimum height of window.
	(w3m-form-input-select): Ditto.
	(w3m-form-input-textarea-set): Restore the configuration of window.
	(w3m-form-input-select-set): Ditto.
	(w3m-form-input-map-buffer-lines): New user option.
	(w3m-form-input-map-mode-hook): Ditto.
	(w3m-form-input-map-set-hook): Ditto.
	(w3m-form-input-map-keymap): New keymap.
	(w3m-form-input-map-buffer): New buffer local variable.
	(w3m-form-input-map-wincfg): Ditto.
	(w3m-form-input-map-set): New function.
	(w3m-form-input-map-mode): Ditto.
	(w3m-form-input-map): Ditto.
	(w3m-form-input-select-keymap): Added mouse operation.
	(w3m-form-input-map-keymap): Ditto.
	(w3m-form-input-select-set-mouse): New function.
	(w3m-form-input-map-set-mouse): Ditto.

2001-07-18  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-submit): New defmacro.
	(w3m-mouse-view-this-url): Handle the action of form tag.
	(w3m-submit-form): New function, submit the form.
	(w3m-lynx-like-map): Add w3m-submit-form().
	(w3m-info-like-map): Ditto.
	(w3m-mode): Modify doc-string.

	* w3m-form.el (w3m-fontify-forms): Add 'w3m-submit property on
	all tags except the "reset".

2001-07-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-w3m-retrieve): Added argument `post-data'.
	(w3m-w3m-retrieve): Add -post and -post_ct to `w3m-command-arguments'
	when `post-data' is specified.
	(w3m-retrieve): Added argument `post-data'.
	(w3m-exec): Ditto.
	(w3m-goto-url): renamed `post-body' to `post-data'.
	Don't bind w3m-command-arguments here.

2001-07-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-w3m-dump-source, w3m-w3m-dump-head-source,
	w3m-local-dirlist-cgi): Say where the url is being connected to.

	* w3mhack.el (w3mhack-compile): Changed message convention.
	* w3m.el (w3m-view-source, w3m-rendering-region,
	w3m-w3m-dump-source, w3m-w3m-dump-head-source, w3m-w3m-get-header,
	w3m-local-dirlist-cgi, w3m-fontify): Ditto.
	* w3m-e21.el (w3m-setup-header-line): Ditto.
	* w3m-dtree.el (w3m-about-dtree): Ditto.
	* w3m-bookmark.el (w3m-bookmark-add-current-url,
	w3m-bookmark-add-this-url, w3m-bookmark-add-this-url): Ditto.
	* mime-w3m.el (mime-w3m-mouse-view-this-url): Ditto.

	* w3m.el (w3m-gohome, w3m-convert-ftp-url-for-emacsen,
	w3m-goto-mailto-url, w3m-edit-current-url, w3m-external-view,
	w3m-local-dirlist-cgi, w3m-toggle-inline-images,
	w3m-parse-attributes): Changed error message convention.
	* w3m-hist.el (w3m-history-add-arrived-db, w3m-history-rename-url,
	w3m-history-remove-properties, w3m-history-add-properties,
	w3m-history-plist-put, w3m-history-plist-get): Ditto.
	* w3m-bookmark.el (w3m-bookmark-add, w3m-bookmark-write-file):
	Ditto.

2001-07-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-mbconv-command): New customize variable.
	(w3m-decode-buffer): If charset equal 'x-moe-internal', call
	w3m-x-moe-decode-buffer().
	(w3m-x-moe-decode-buffer): New funcion. A coding-system of
	buffer converts 'x-moe-internal' to usual coding-system for
	emacsen.

	* w3m-form.el (w3m-form-parse-region): If charset equal
	'x-moe-internal', call w3m-x-moe-decode-buffer().
	(w3m-form-parse-forms): Handles value of 'charset', if w3m-type eq
	'w3mmee.

2001-07-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-byte-optimize-letX): Remove
	`pop-up-frame-alist' when compiling.

	* w3m.el (w3m): Use the new macros; set the value of
	`w3m-initial-frame' in the popped up frame.
	(w3m-close-window): Use `w3m-delete-frame-maybe'.
	(w3m-quit): Use `w3m-delete-frame-maybe'.
	(w3m-delete-frame-maybe): New function.
	(w3m-copy-buffer): Pop up a new frame if `w3m-pop-up-frames' is
	non-nil; set the value of `w3m-initial-frame' in the new frame.
	(w3m-popup-frame-p): New macro.
	(w3m-pop-up-frame-parameters): New macro.
	(w3m-initial-frame): New internal variable.

	* w3m-xmas.el (w3m-setup-header-line): Use text-properties instead
	of the raw extents for highlighting a header line.

2001-07-13  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-form.el (w3m-form-new): Added 'charlst' option.
	(w3m-form-charlst): New macro.
	(w3m-form-plist): Move a indent of an array.
	(w3m-form-put): Ditto.
	(w3m-form-make-form-urlencoded): Remove 'coding' option.
	If 'accept-charset' denotes within <form> tag, resolve coding-system
	according to its list of charset.
	(w3m-form-parse-forms): Handle value of 'accept-charset'.

2001-07-12  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-tag-regexp-of): New macro to generate regexp of
	specified tag(s).
	(w3m-parse-attributes): Skip spaces before parsing.

	* w3m-form.el (w3m-form-parse-forms): More flexible and simple tag
	finding using `w3m-tag-regexp-of' macro.

2001-07-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-charset-coding-system-alist): Added 'us_ascii'.
	(w3m-w3m-attributes): Use content of w3m-document-charset: field as
	charset if exists.

2001-07-12  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-form.el (w3m-form-parse-forms): Parse the tags only within the
	"<form ..> ... </form>".

2001-07-12  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-remove-redundant-spaces): Don't cause an error when str
	contains only spaces.

2001-07-12  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* mew-w3m.el: Hand-over of copyright of this file from Goto to
	Tsuchiya. This is consensual.

2001-07-11  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-rendering-region): Add charset option when call
	w3m-form-parse-region().

	* w3m-form.el (w3m-form-parse-region): Add charset option.
	If w3m-type is 'w3mmee or 'w3m-m17n, forms parse within a decoded
	temporally buffer.
	(w3m-form-parse-forms): New function.

2001-07-11  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* w3m-form.el (w3m-form-parse-region): Don't extract value from
	submit button, again.
	(w3m-form-submit): Don't set value when NAME is omitted.

2001-07-11  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-rendering-region): Do not break matching data.

2001-07-11  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-form.el (w3m-fontify-forms): Put text properties
	corresponding to form types.
	(w3m-form-input): Simplify.
	(w3m-form-input-password): New function.
	(w3m-form-input-checkbox): Ditto.
	(w3m-form-input-radio): Ditto.
	(w3m-form-input-textarea): Follow changes in `w3m-form-input'.
	(w3m-form-input-select): Ditto.

2001-07-11  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m-form.el (w3m-form-goto-next-field): New function.
	(w3m-form-make-form-urlencoded): Refine to support value of
	check-box type which is list of value string.
	(w3m-form-parse-region): Support CHECKBOX type and RADIO
	type. Note that CHECKBOX type has multiple values.
	(w3m-fontify-forms): Use new property 'w3m-form-field-id to
	identify each field to support RADIO type item. Also removed
	value putting code because values are already set in parsing.
	(w3m-form-input): Support action for CHECKBOX and RADIO type
	field.

	* w3m.el (w3m-url-encode-string): Encode SPACE(0x20) as "+".
	(w3m-rendering-region): Decode entities in title string.

2001-07-10  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-w3m-attributes): Fixed problem when charset is quoted.

	* w3m-form.el (w3m-form-parse-region): Don't extract value from
	submit button.
	(w3m-form-submit): If ACTION is not specified, send data to current
	url.
	(w3m-form-make-get-string): Removed.

2001-07-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el: Bind `:bool' for old Emacsen.

2001-07-10  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-parse-attributes): Support :bool type attribute.

	* w3m-form.el (w3m-form-parse-region): Use :bool type for SELECTED
	attribute of OPTION tag.

2001-07-09  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-make-form-urlencoded): If second value of plist
	is consp, use car value (for select).
	(w3m-form-parse-region): Don't parse type attribute for textarea;
	Process select.
	(w3m-fontify-forms): Save value and name for submit.
	(w3m-form-replace): Added optional argument `invisible'.
	(w3m-form-input): Process SELECT and PASSWORD.
	(w3m-form-input-select-buffer-lines): New user option.
	(w3m-form-input-select-mode-hook): Ditto.
	(w3m-form-input-select-set-hook): Ditto.
	(w3m-form-input-select-keymap): New keymap.
	(w3m-form-input-select-buffer): New buffer local variable.
	(w3m-form-input-select-form): Ditto.
	(w3m-form-input-select-name): Ditto.
	(w3m-form-input-select-point): Ditto.
	(w3m-form-input-select-candidates): Ditto.
	(w3m-form-input-select-set): New function.
	(w3m-form-input-select-mode): Ditto.
	(w3m-form-input-select): Ditto.
	(w3m-form-submit): Added optional argument name and value.

	* shimbun/sb-airs.el (shimbun-airs-coding-system): Removed.
	* shimbun/sb-asahi-html.el (shimbun-asahi-html-coding-system): Ditto.
	* shimbun/sb-asahi.el (shimbun-asahi-coding-system): Ditto.
	* shimbun/sb-bbdb-ml.el (shimbun-bbdb-ml-coding-system): Ditto.
	* shimbun/sb-cnet.el (shimbun-cnet-coding-system): Ditto.
	* shimbun/sb-h14m.el (shimbun-h14m-coding-system): Ditto.
	* shimbun/sb-impress.el (shimbun-impress-coding-system): Ditto.
	(shimbun-impress-groups-alist): Removed jijinews, sports.
	* shimbun/sb-linuxce-jp.el (shimbun-linuxce-jp-coding-system): Ditto.
	* shimbun/sb-meadow.el (shimbun-meadow-coding-system): Ditto.
	* shimbun/sb-mew.el (shimbun-mew-coding-system): Ditto.
	* shimbun/sb-namazu.el (shimbun-namazu-coding-system): Ditto.
	* shimbun/sb-netbsd.el (shimbun-netbsd-coding-system): Ditto.
	* shimbun/sb-nikkei.el (shimbun-nikkei-coding-system): Ditto.
	* shimbun/sb-ruby.el (shimbun-ruby-coding-system): Ditto.
	* shimbun/sb-sponichi.el (shimbun-sponichi-coding-system): Ditto.
	* shimbun/sb-toshiba.el (shimbun-toshiba-coding-system): Ditto.
	* shimbun/sb-vinelinux.el (shimbun-vinelinux-coding-system): Ditto.
	* shimbun/sb-w3m-dev.el (shimbun-w3m-dev-coding-system): Ditto.
	* shimbun/sb-wired.el (shimbun-wired-coding-system): Ditto.
	* shimbun/sb-yahoo.el (shimbun-yahoo-coding-system): Ditto.
	* shimbun/sb-yomiuri.el (shimbun-yomiuri-coding-system): Ditto.
	* shimbun/sb-zdnet.el (shimbun-zdnet-coding-system): Ditto.

	* w3m.el (w3m-remove-comments): New function.
	(w3m-rendering-region): Call it.

2001-07-06  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-default-coding-system): Changed default value
	to shift_jis.
	(w3m-form-make-form-urlencoded): Removed redundant local variable.

	* w3m.el (w3m-url-encode-string): Encode newline as "%0D%0A"

	* w3m-form.el (w3m-form-default-coding-system): New user option.
	(w3m-form-make-form-urlencoded): Use it.
	(w3m-form-input-textarea-set): Get values of buffer local variables
	before changing buffer.
	(w3m-form-input-textarea): Set values of buffer local variables
	after changing buffer.

2001-07-06  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-form.el (comment): Modify URI of emacs-w3m.
	(w3m-form-input-textarea-mode-hook): New user option.
	(w3m-form-input-textarea-point): New buffer local variable.
	(w3m-form-input-textarea-set):
	Run 'w3m-form-input-textarea-set-hook' hook first.
	Get 'w3m-buffer' from input buffer.
	Go to the point of the orignal form when switch to 'w3m-buffer'.
	(w3m-form-input-textarea): Save original point to
	'w3m-form-input-textarea-point'.
	Set 'w3m-form-input-textarea-buffer' within the buffer of the
	input area.

	* w3m.el (w3m-about): Modify URI of emacs-w3m.
	* w3m-xmas.el (comment): Ditto.
	* w3m-weather.el (comment): Ditto.
	* w3m-search.el (comment): Ditto.
	* w3m-om.el (comment): Ditto.
	* w3m-macro.el (comment): Ditto.
	* w3m-e21.el (comment): Ditto.
	* w3m-e20.el (comment): Ditto.
	* w3m-dtree.el (comment): Ditto.
	* w3m-bookmark.el (comment): Ditto.
	* w3m-antenna.el (comment): Ditto.


2001-07-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-0.2.1-mnc.patch: Added [-post body] option.

	* w3m.el (w3m-url-encode-string): Don't cause an error when str is nil.
	(w3m-goto-url): Added post-body argument;
	Set -post option if post-body is specified.

	* w3m-form.el (w3m-form-make-form-urlencoded): New function.
	(w3m-form-make-get-string): Use `w3m-form-make-form-urlencoded'.
	(w3m-form-parse-region): Add textarea processing.
	(w3m-form-replace): Delete newline characters.
	(w3m-form-input): Added textarea processing.
	(w3m-form-submit): If form method is POST, then set post-body
	argument of `w3m-goto-url'.
	(w3m-form-input-textarea-buffer-lines): New user option.
	(w3m-form-input-textarea-mode-hook): Ditto.
	(w3m-form-input-textarea-keymap): New keymap.
	(w3m-form-input-textarea-buffer): New buffer local variable.
	(w3m-form-input-textarea-form): Ditto.
	(w3m-form-input-textarea-name): Ditto.
	(w3m-form-input-textarea-set): New function.
	(w3m-form-input-textarea-mode): Ditto.
	(w3m-form-input-textarea): Ditto.

2001-07-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-slashdot-jp.el (shimbun-slashdot-jp-url): Changed url.
	(shimbun-slashdot-jp-content-start): Follow the page renewal.
	(shimbun-slashdot-jp-make-contents): Ditto.

2001-06-29  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* mime-w3m.el (mime-w3m-preview-text/html): Search xref in the
	root entitiry.

2001-06-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-version): Bind `print-level' and
	`print-length' to nil.
	(w3mhack-examine-modules): Ditto.
	* w3m.el (w3m-rendering-region): Ditto.
	* w3m-form.el (w3m-form-submit): Ditto.

2001-06-21  Mito  <mit@nines.nec.co.jp>

	* shimbun/sb-hns.el (shimbun-hns-article): Add title string to the
	article buffer.

2001-06-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-kantei.el (shimbun-kantei-from-address): Define.
	(shimbun-get-headers): Encode from.

	* shimbun/sb-slashdot-jp.el (shimbun-headers): Setup 'cid' argument for
	comments.pl.
	(shimbun-slashdot-jp-make-contents): New inline function.
	(shimbun-article): Define (To reload story articles).

2001-06-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-encapsulate-images): Renamed from
	`shimbun-encapsulate-article'.

2001-06-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-kantei.el (shimbun-kantei-x-face-alist): New variable.

2001-06-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-impress.el (shimbun-impress-expiration-days):
	Commented out.

	* shimbun/sb-kantei.el: New file.

2001-06-15  ABE Yasushi  <yasushi@stbbs.net>

	* shimbun/sb-javaconf.el (shimbun-javaconf-groups): Add some groups.
	(shimbun-get-headers): Follow the change above.

2001-06-14  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-mhonarc.el (shimbun-make-contents): Fixed reference order.

2001-06-14  ABE Yasushi  <yasushi@stbbs.net>

	* shimbun/sb-javaconf.el: New file.

2001-06-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-base64-encode-string): Enclose the
	function definition with `eval-and-compile'.

2001-06-14  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-content-type): New alias.
	(shimbun-url-exists-p): New function.

	* shimbun/sb-gyve.el: New file.

2001-06-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-slashdot-jp.el (shimbun-headers): Encode `from' with
	`shimbun-mime-encode-string';
	Follow the search.pl's renewal;
	Added 'mode=flat' option for comments.pl.

2001-06-12  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-m17n.el: New file.

	* w3m.el: Added support code for w3m-m17n.
	(w3m-type): Add new candidate.
	(w3m-command, w3m-input-coding-system, w3m-output-coding-system)
	(w3m-halfdump-command-arguments): Add default value for w3m-m17n.
	(w3m-exec) [w3m-m17n]: No call `w3m-decode-buffer'.
	(w3m-region) [w3m-m17n]: No call `encode-coding-region'.

2001-06-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/shimbun.el (shimbun-make-mime-article): Fixed search
	process for `src' attribute of `img' tag.

2001-06-12  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun): New customize group.
	(shimbun-x-face): Defined as customize option.
	(shimbun-encapsulate-article): Ditto.
	(shimbun-use-bbdb-for-x-face): Ditto.

2001-06-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/shimbun.el (shimbun-retrieve-url): Return content-type.
	(shimbun-suffix-content-type-alist): Abolish.
	(shimbun-encapsulate-article): Fixed docstring.
	(shimbun-make-mime-article): Added docstring;
	Use return value of `shimbun-retrieve-url';
	Set start parameter for multipart/related;
	If same image is used multiple time in the article, reuse its
	content-id.

2001-06-11  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-slashdot-jp.el (shimbun-make-contents):
	Call `shimbun-make-mime-article'.
	* shimbun/sb-hns.el (shimbun-article): Ditto.

	* shimbun/shimbun.el (toplevel): Require 'mel.
	(shimbun-base64-encode-string): New function.
	(shimbun-suffix-content-type-alist): New constant.
	(shimbun-encapsulate-article): New variable.
	(shimbun-make-mime-article): New function.
	(shimbun-make-html-contents): Call `shimbun-make-mime-article'.

	* shimbun/sb-asahi.el (shimbun-asahi-expiration-days): Changed
	default value as 6.

	* shimbun/sb-asahi-html.el (shimbun-asahi-html-expiration-days):
	New variable.

2001-06-11  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-dump-head-source-command-argument): Its old name is
	`w3m-dump-head-source-command-arguments'.

2001-06-11  Mito  <mit@nines.nec.co.jp>

	* w3m.el (w3m-broken-proxy-cache): New variable.
	(w3m-dump-head-source-command-arguments): Defined as list.
	(w3m-w3m-retrieve): Cache on proxy server isn't used when neither
	`no-cache' nor `w3m-broken-proxy-cache' equal to nil.

2001-06-10  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-w3m-dev.el: Remove comment.
	(shimbun-w3m-dev-coding-system): Change iso-2022-jp to euc-jp.

	* shimbun/sb-vinelinux.el: New file.

2001-06-10  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-form.el (w3m-form-parse-region): Check the value of
	`w3m-current-buffer' to avoid wrong type argument error.

	* w3m.el (w3m-rendering-region): Set `w3m-current-buffer' refered
	in `w3m-form-parse-region'.

2001-06-09  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-attributes): Remove URL fragments before checking
	its attributes.
	(w3m-retrieve): Remove URL fragments before getting its contents.
	(w3m-w3m-retrieve): Follow changes in `w3m-retrieve'.
	(w3m-arrived-add): Simplified regular expression.
	(w3m-parse-attributes): Changed form spec for edebug.

	* w3m-form.el (w3m-form-parse-region): Set `w3m-current-forms' in
	the buffer `w3m-current-buffer'.

	* mime-w3m.el (mime-w3m-save-background-color): Changed form spec
	for edebug.

2001-06-09  Kiyokazu SUTO  <suto@ks-and-ks.ne.jp>,
	    TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-fontify-anchors): Process w3m internal tag `<_id>'
	which represents ID properties.

2001-06-08  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-zdnet.el (shimbun-zdnet-expiration-days): Removed.

	* shimbun/sb-netbsd.el (shimbun-get-headers): Fixed order of
	retrieved headers and condition to check whether the target header
	is already retrieved or not.

	* w3m.el (w3m-w3m-retrieve): Remove URL's fragment before checking
	cache.

2001-06-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/shimbun.el (shimbun): Removed slot `use-entire-index'.
	(shimbun-mua::shimbun-mua-use-entire-index): Abolish.
	(shimbun-open): Don't setup `use-entire-index' slot.

	* shimbun/sb-slashdot-jp.el (shimbun-make-contents):
	Decide charset dynamically.

2001-06-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-unoptimize-animated-gif): Truncate an animated
	gif to have only one frame when the size is larger than the value
	of `w3m-animated-gif-maximum-size'.
	(w3m-animated-gif-maximum-size): New variable.

2001-06-06  Kenichi OKADA  <okada@opaopa.org>

	* w3m-xmas.el: Require `path-util'.

2001-06-07  NAKAJIMA Mikio <minakaji@osaka.email.ne.jp>

	* w3m.el (w3m-exec-process): Replace `delete' with `delq'.

2001-06-07  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-airs.el (shimbun-get-headers): Added optional argument
	`range'.
	* shimbun/sb-airs.el (shimbun-get-headers): Ditto.
	* shimbun/sb-asahi.el (shimbun-get-headers): Ditto.
	* shimbun/sb-cnet.el (shimbun-get-headers): Ditto.
	* shimbun/sb-fml.el (shimbun-get-headers): Ditto.
	* shimbun/sb-glimpse.el (shimbun-get-headers): Ditto.
	* shimbun/sb-gnome.el (shimbun-get-headers): Ditto.
	* shimbun/sb-h14m.el (shimbun-get-headers): Ditto.
	* shimbun/sb-hns.el (shimbun-get-headers): Ditto.
	* shimbun/sb-impress.el (shimbun-get-headers): Ditto.
	* shimbun/sb-mainichi.el (shimbun-get-headers): Ditto.
	* shimbun/sb-mew.el (shimbun-get-headers): Ditto.
	* shimbun/sb-mhonarc.el (shimbun-get-headers): Ditto.
	* shimbun/sb-namazu.el (shimbun-get-headers): Ditto.
	* shimbun/sb-netbsd.el (shimbun-get-headers): Ditto.
	* shimbun/sb-nikkei.el (shimbun-get-headers): Ditto.
	* shimbun/sb-ruby.el (shimbun-get-headers): Ditto.
	* shimbun/sb-sponichi.el (shimbun-get-headers): Ditto.
	* shimbun/sb-yahoo.el (shimbun-get-headers): Ditto.
	* shimbun/sb-yomiuri.el (shimbun-get-headers): Ditto.
	* shimbun/sb-zdnet.el (shimbun-get-headers): Ditto.
	* shimbun/sb-lump.el (shimbun-headers): Ditto.
	* shimbun/sb-meadow.el (shimbun-headers): Ditto.
	* shimbun/sb-slashdot-jp.el (shimbun-headers): Ditto.
	(shimbun-slashdot-jp-story-max-pages): New variable.
	(shimbun-slashdot-jp-comment-max-pages): Ditto.
	(shimbun-slashdot-jp-comments-per-story): Ditto.

	* shimbun/sb-tcup.el (shimbun-headers): Ditto.

	* shimbun/shimbun.el (shimbun-headers): Added optional argument
	`range'.
	(shimbun-get-headers): Ditto.
	(shimbun-header-index-pages): New macro.

2001-06-06  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-yahoo.el (shimbun-yahoo-expiration-days): New variable.
	* shimbun/sb-zdnet.el (shimbun-zdnet-expiration-days): New variable.
	(shimbun-article-expiration-days): Removed.
	* shimbun/sb-yomiuri.el (shimbun-yomiuri-article-expiration-days):
	New variable.
	(shimbun-article-expiration-days): Removed.
	* shimbun/sb-wired.el (shimbun-wired-expiration-days):
	New variable.
	(shimbun-article-expiration-days): Removed.
	* shimbun/sb-sponichi.el (shimbun-sponichi-expiration-days):
	New variable.
	(shimbun-article-expiration-days): Removed.
	* shimbun/sb-nikkei.el (shimbun-nikkei-expiration-days):
	New variable.
	(shimbun-article-expiration-days): Removed.
	* shimbun/sb-mainichi.el (shimbun-mainichi-expiration-days):
	New variable.
	(shimbun-article-expiration-days): Removed.
	* shimbun/sb-impress.el (shimbun-impress-expiration-days):
	New variable.
	(shimbun-article-expiration-days): Removed.
	* shimbun/sb-cnet.el (shimbun-cnet-expiration-days): New variable.
	(shimbun-article-expiration-days): Removed.

2001-06-06  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun): Added new slot `expiration-days'.
	* sb-asahi.el (shimbun-asahi-article-expiration-days): New variable.
	(shimbun-article-expiration-days): Removed.

2001-06-06  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/shimbun.el (shimbun-article-expiration-days): New method.

	* sb-asahi.el (shimbun-article-expiration-days): Define as 7 days.
	* sb-cnet.el (shimbun-article-expiration-days): Ditto.
	* sb-impress.el (shimbun-article-expiration-days): Ditto.
	* sb-mainichi.el (shimbun-article-expiration-days): Ditto.
	* sb-nikkei.el (shimbun-article-expiration-days): Ditto.
	* sb-sponichi.el (shimbun-article-expiration-days): Ditto.
	* sb-wired.el (shimbun-article-expiration-days): Ditto.
	* sb-yomiuri.el (shimbun-article-expiration-days): Ditto.
	* sb-zdnet.el (shimbun-article-expiration-days): Ditto.

2001-06-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/shimbun.el (shimbun-retrieve-url): Don't cause an error
	when url is nil.
	(shimbun-retrieve-url-buffer): Ditto.

	* shimbun/sb-slashdot-jp.el (shimbun-slashdot-jp-story-pages):
	New variable.
	(shimbun-slashdot-jp-comment-pages): Ditto.
	(shimbun-headers): Retrieve pages according to above variables.
	(shimbun-make-contents): Fixed re-search-forward arguments.

2001-06-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-toolbar): Use the English language when the value of
	the variable `current-language-environment' is not "Japanese".

2001-06-04  Pavel Janik  <Pavel@Janik.cz>

	* w3m.el (w3m-about-db-history): Fix typo Titile -> Title.

2001-06-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-slashdot-jp.el: New file.

2001-06-01  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-ding.el (shimbun-ding-groups): Add "ding-announce" and
	"ding-cvslog".
	(shimbun-ding-x-face-alist): New variable.

2001-06-01  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-halfdump-command-arguments): Changed default value
	to "-dump=half-buffer" when w3m-type equal 'w3mmee.

2001-05-31  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-om.el (iso-2022-7bit): New coding-system generated by copying
	from `*iso-2022-jp*'.

2001-05-31  Koichiro Ohba <koichiro@meadowy.org>

	* shimbun/sb-mainichi.el: New backend.

2001-05-31  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-coding-system): Changed default value to
	'iso-2022-7bit.
	(w3m-input-coding-system): Ditto.

2001-05-31  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-dtree.el (w3m-dtree-create): Insert 'Meta tag' to the
	binding of charset.

	* w3m.el (w3m-local-dirlist-cgi): Fix charset handling.

2001-05-31  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-header-insert): Use BBDB records for
	choosing the author's X-Face.
	(shimbun-use-bbdb-for-x-face): New variable.  Users can set this
	to `never' to inhibit the use of BBDB.
	(TopLevel): Attempt to load `bbdb' when compiling.

2001-05-31  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-mime-encode-string): Replace all
	spacing characters to a single white character.

	* shimbun/sb-mhonarc.el (shimbun-make-contents): Subject field and
	from field are MIME-encoded before they are stored.

	* shimbun/sb-fml.el (shimbun-make-contents): Ditto.

2001-05-30  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-file-name-coding-system): New customizable value.
	(w3m-charset-coding-system-alist): Reverse list.
	(w3m-dirlist-cgi-program): Change default value for OS/2.
	(w3m-local-dirlist-cgi): Set "QUERY_STRING" to encoded string of
	'w3m-file-name-coding-system'. Insert 'Meta tag' to the binding of
	charset.

2001-05-30  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-goto-url): Set a string representing file
	interpreted as a directory to `default-directory'.
	(w3m-about-source): Call `w3m-decode-buffer'.

2001-05-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-decode-buffer): Allow `detect-coding-region' to
	return both a coding-system and a list of coding-systems.

2001-05-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-linuxce-jp.el: New file.

	* shimbun/sb-toshiba.el: New file.

2001-05-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (XEmacs): Require `byte-optimize' expressly before
	advising the function `byte-optimize-form-code-walker'.

2001-05-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-meadow.el (shimbun-get-headers): Use
	`shimbun-expand-url' instead of `w3m-expand-url'.

2001-05-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-rename-url): Don't use
	`with-current-buffer' for old Emacsen.
	(w3m-history-copy): Ditto.
	(w3m-history-share-properties): Ditto.
	(w3m-history-seek-properties): Ditto.

2001-05-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-sponichi.el (author): Corrected.

	* shimbun/sb-meadow.el: It looks all indexes.
	(shimbun-index-url): Removed.
	(shimbun-get-headers): Removed.
	(shimbun-headers): New method.

2001-05-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (slow): New rule for the developers to check a
	portability for each module.
	* w3m-xmas.el (w3m-cache-unoptimized-gif-images): Fix typo.

2001-05-27  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-ruby.el (shimbun-make-contents): Call
	`shimbun-decode-entities'.

	* shimbun/sb-nikkei.el (shimbun-get-headers): Don't call `nreverse'.

	* shimbun/sb-yahoo.el (shimbun-get-headers): Ditto.

2001-05-27  NAKAJIMA Mikio <minakaji@osaka.email.ne.jp>

	* shimbun/sb-ruby.el: New file.

	* shimbun/sb-fml.el (shimbun-fml-parse-time): Removed needless
	local variables.

2001-05-26  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-local-directory-view-method): Modify default value.
	(w3m-direlist-cgi-program): New variable.
	(w3m-local-retrieve): Call w3m-local-dirlist-cgi() when local
	directory.
	(w3m-local-dirlist-cgi): New function. Execute either 'w3m' or
	'direlist.cgi'.
	(w3m-goto-url-localcgi-movepoint): Use 'w3m-name-anchor instead of
	'patter-matching'.
	(w3m-url-completion): Handling drive letter for any broken OSes.

	* w3m-dtree.el (w3m-dtree-stop-strings): Add a new alternative.

2001-05-23  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* shimbun/sb-fml.el (shimbun-fml-parse-time): New function.
	(shimbun-get-headers): Use `shimbun-fml-parse-time'.

2001-05-26  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-decode-buffer): Removed reference of
	`w3m-coding-system'.

2001-05-25  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-dtree.el (w3m-dtree-directory-depth): New variable.
	(w3m-dtree-stop-strings): Ditto.
	(w3m-dtree-create-sub): Add new arugument 'depth'. Stop recursive
	call, if directory-depth over the 'w3m-dtree-directory-depth'.

2001-05-25  NAKAGAWA Takayuki <tknakaga@kanagawa.hitachi.co.jp>

	* w3m-dtree.el (w3m-dtree-create-sub): To avoid infinite recusion,
	directory-files now returns absolute file names and
	expand-file-name is omitted.

2001-05-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-about-history): Get the values of `w3m-current-url'
	and `w3m-history-flat' from the buffer `w3m-current-buffer'.
	(w3m-goto-url): Set the value of `w3m-current-buffer' as the
	current buffer.
	(w3m-current-buffer): New internal variable.

2001-05-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-examine-modules): Made it to return
	w3m-macro.elc and the version specific module first.

	* w3m.el (w3m-setup-menu): Define it if the feature `xemacs' is not
	provided.
	(TopLevel): Don't bind the functions `w3m-display-inline-image-p',
	`w3m-display-graphic-p', `w3m-update-toolbar', `w3m-setup-toolbar',
	`w3m-image-type-available-p', `w3m-insert-image' and
	`w3m-create-image'.
	(w3m-get-buffer-create, w3m-add-text-properties,
	w3m-with-work-buffer): Moved to w3m-macro.el.
	(w3m-charset-coding-system-alist): Use `w3m-find-coding-system'
	directly.
	(w3m-find-coding-system): Moved to the version specific modules.
	(w3m-static-cond, w3m-static-if): Moved to w3m-macro.el.
	(TopLevel): Require `w3m-e20' when the version of the running Emacs
	is neither XEmacs, Emacs 21 nor Mule2.
	(TopLevel): Require `w3m-macro'.

	* w3m-xmas.el (w3m-euc-japan-decoder): Define it when the function
	`ccl-compile-write-multibyte-character' is bound.
	(widget-coding-system-action): Use `eval' instead of the
	funcall'ing for the function `widget-coding-system-prompt-value'.
	It is only for avoiding a byte-compile warning.
	(w3m-should-unoptimize-animated-gifs): Check for both
	`emacs-patch-level' and `emacs-beta-version' when XEmacs 21.2 is
	running.
	(TopLevel): Bind the functions `w3m-image-type' and `w3m-retrieve'
	when compiling.
	(TopLevel): Bind the variables `w3m-current-url',
	`w3m-display-inline-image', `w3m-icon-directory', `w3m-menubar',
	`w3m-toolbar', `w3m-toolbar-buttons', `w3m-use-header-line' and
	`w3m-work-buffer-name' when compiling.
	(TopLevel): Don't require `w3m'.
	(TopLevel): Provide the feature `w3m-xmas' in the end of the file.

	* w3m-om.el (read-passwd): Enclose it with `eval-and-compile'.
	(w3m-find-coding-system): New inline function moved from w3m.el.
	(w3m-display-inline-image-p, w3m-display-graphic-p,
	w3m-update-toolbar, w3m-setup-toolbar, w3m-image-type-available-p,
	w3m-insert-image, w3m-create-image): Alias to `ignore'.
	(TopLevel): Bind the variables `w3m-menubar' and `w3m-mode-map'
	when compiling.
	(TopLevel): Don't require `w3m'.
	(TopLevel): Provide the feature `w3m-om' in the end of the file.

	* w3m-macro.el: New file which currently contains
	`w3m-get-buffer-create', `w3m-add-text-properties',
	`w3m-with-work-buffer', `w3m-static-cond' and `w3m-static-if'.

	* w3m-e21.el (w3m-update-toolbar): Alias to `ignore'.
	(w3m-find-coding-system): New inline function moved from w3m.el.
	(TopLevel): Bind the functions `w3m-image-type' and `w3m-retrieve'
	when compiling.
	(TopLevel): Bind the variables `w3m-work-buffer-name',
	`w3m-use-header-line', `w3m-toolbar-buttons', `w3m-toolbar',
	`w3m-mode-map', `w3m-icon-directory' and `w3m-display-inline-image'
	when compiling.
	(TopLevel): Don't require `w3m'; require `w3m-macro'.
	(TopLevel): Provide the feature `w3m-e21' in the end of the file.

	* w3m-e20.el: New file.

2001-05-25  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-mhonarc.el (shimbun-mhonarc-get-headers): Redefine
	as macro.
	* shimbun/sb-airs.el (shimbun-get-headers): Follow the change above.
	* shimbun/sb-glimpse.el (shimbun-get-headers): Ditto.
	* shimbun/sb-h14m.el (shimbun-get-headers): Ditto.
	* shimbun/sb-meadow.el (shimbun-get-headers): Ditto.
	* shimbun/sb-namazu.el (shimbun-get-headers): Ditto.

	* shimbun/sb-xemacs.el (shimbun-xemacs-url): Fixed.

2001-05-25  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-expand-file-name-as-url): Remove handling
	'about://dtree'.
	(w3m-local-content-type): Ditto.
	(w3m-url-local-p): Ditto.
	(w3m-local-directory-view-method): New variable.
	(w3m-local-retrieve): If url is directory, call w3m by way of kick
	'dirlist.cgi'
	(w3m-url-dtree-p): New defsubst.
	(w3m-edit-current-url, w3m-edit-this-url): Use w3m-url-dtree-p().
	(w3m-goto-url-localcgi-movepoint): New function.
	(w3m-goto-url): If URL is a local directory, check and change URL
	by the use of 'w3m-local-directory-view-method'.
	If URL type is a local cgi, move to its directory point.

2001-05-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-euc-japan-decoder): Check if
	`emacs-major-version' is 21 instead of 20 and check for
	`emacs-beta-version' instead of `emacs-patch-level'.
	(w3m-should-unoptimize-animated-gifs): Ditto.

2001-05-25  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-xmas.el (w3m-euc-japan-decoder): Fix typo.

2001-05-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-euc-japan-decoder): Don't check for the constant
	`emacs-patch-level' when the beta versions of XEmacs is running.

2001-05-24  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-h14m.el: New file.

	* shimbun/sb-xemacs.el: Require `sb-glimpse' instead of `sb-mhonarc'.
	(shimbun-xemacs): Inherit `shimbun-glimpse' instead of
	`shimbun-mhonarc'.
	(shimbun-xemacs-concat-url,shimbun-index-url,shimbun-get-headers):
	Removed.
	(shimbun-xemacs-reverse-flag): New variable.
	(shimbun-xemacs-litemplate-regexp): New variable.

	* shimbun/sb-ding.el: Require `sb-glimpse' instead of `sb-xemacs'.
	(shimbun-ding): Inherit `shimbun-glimpse' instead of `shimbun-xemacs'.
	(shimbun-ding-reverse-flag): New variable.
	(shimbun-ding-litemplate-regexp): New variable.

	* shimbun/sb-glimpse.el: New file.

	* shimbun/sb-airs.el (shimbun-airs-reverse-flag): New variable.
	(shimbun-airs-litemplate-regexp): New variable.
	(shimbun-get-headers): Use `shimbun-mhonarc-get-headers'.

	* shimbun/sb-mhonarc.el (shimbun-mhonarc-replace-newline-to-space):
	New function.
	(shimbun-mhonarc-extract-header-values): Convert to old style of
	macro defintion; Use `shimbun-mhonarc-replace-newline-to-space'
	instead of `subst-char-in-string'.

2001-05-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-euc-japan-decoder): Not define when it has been
	already defined.

	* w3m-xmas.el (w3m-euc-japan-decoder): Define when XEmacs whose
	version is greater than 21.2.19 is used.

2001-05-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el: Modify messages in `w3m-view-header', `w3m-view-source',
	`w3m-edit-this-url', `w3m-print-this-url', `w3m-download-this-url',
	`w3m-view-current-url-with-external-browser', `w3m-save-image',
	`w3m-view-image', `w3m-mouse-view-this-url', `w3m-view-this-url'
	and `w3m-search-name-anchor'.

	* w3m.el (w3m-toggle-inline-images): Signal an error when the
	function `w3m-display-graphic-p' returns nil.
	(w3m-display-graphic-p): Alias to `ignore' by default.
	(w3m-menubar): Disable a menu button "Toggle Images" when the
	function `w3m-display-graphic-p' returns nil.
	* w3m-xmas.el (w3m-display-graphic-p): Alias to
	`device-on-window-system-p'.
	* w3m-e21.el (w3m-display-graphic-p): Alias to `display-graphic-p'.

2001-05-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-find-coding-system): New function to replace
	`find-coding-system'.
	(w3m-charset-to-coding-system): Use `w3m-find-coding-system'.
	(make-ccl-coding-system): Removed.
	(toplevel) [emacs20, emacs21]: Removed dependency on `pccl'.

2001-05-24  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (toplevel): Fix condition for (require 'pccl).

2001-05-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-charset-to-coding-system): Simplified.
	(make-ccl-coding-system) [XEmacs, Mule]: Removed.

2001-05-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-region): Use `w3m-display-inline-image-p'.
	(w3m-goto-url): Ditto.
	(w3m-display-inline-image-p): New function.
	* w3m-xmas.el (w3m-display-inline-image-p): New function.
	* w3m-e21.el (w3m-display-inline-image-p): New function.

2001-05-24  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-mhonarc.el: Added `revers-flag' and `litemplate-regexp'
	slot.
	Define internal accessor.
	(shimbun-mhonarc-litemplate-regexp): New variable.
	(initialize-instance): New method.
	(shimbun-get-headers): New method.
	(shimbun-mhonarc-extract-header-values): New macro.
	(shimbun-mhonarc-get-headers): New function.

	* shimbun/sb-meadow.el: New file.

	* shimbun/sb-namazu.el (shimbun-namazu-reverse-flag): New variable.
	(shimbun-namazu-litemplate-regexp): New variable.
	(shimbun-get-headers): Use `shimbun-mhonarc-get-headers' instead of
	`shimbun-namazu-get-headers-1'
	(shimbun-namazu-get-headers-1): Removed.

2001-05-24  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (toplevel): Define make-ccl-coding-system() myself, when
	failed (require 'pccl).

2001-05-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m): Made it can be called non-interactively or a batch
	job.

	* w3m.el (w3m-goto-url): Add autoload magic cookie.
	* w3m-weather.el (w3m-about-weather, w3m-weather): Ditto.
	* w3m-search.el (w3m-search): Ditto.
	* w3m-form.el (w3m-fontify-forms, w3m-form-parse-region): Ditto.
	* w3m-filter.el (w3m-filter): Ditto.
	* w3m-dtree.el (w3m-dtree, w3m-about-dtree): Ditto.
	* w3m-bookmark.el (w3m-bookmark-view, w3m-bookmark-add-current-url,
	w3m-bookmark-add-this-url): Ditto.
	* w3m-antenna.el (w3m-antenna, w3m-about-antenna): Ditto.
	* mime-w3m.el (mime-w3m-preview-text/html): Ditto.

2001-05-23  Kazuyoshi KOREEDA   <Kazuyoshi.Koreeda@rdmg.mgcs.mei.co.jp>

	* shimbun/sb-nikkei.el: New file.
	* shimbun/sb-yahoo.el: New file.

2001-05-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-coding-system): Changed default value to
	'iso-2022-7bit-ss2.
	(w3m-terminal-coding-system): New user option.
	(w3m-attributes): When URL whose scheme equals to `about' is
	specified, returns `w3m-coding-system' as its content-charset.
	(w3m-exec-process): Refer `w3m-terminal-coding-system'.
	(w3m-decode-buffer): Decode buffer everywhen it is called.
	(w3m-about-retrieve): New function.
	(w3m-cid-retrieve): Ditto.
	(w3m-retrieve): Call `w3m-about-retrieve' and `w3m-cid-retrieve'.
	(w3m-rendering-region) [w3mmee]: No call `encode-coding-region'.
	Fix coding-system spec error for Mule-2.3.
	(w3m-rendering-region): Simplified.
	(w3m-region) [w3mmee]: Encode this buffer as unibyte
	representation.
	(w3m-about-history): No call `w3m-with-work-buffer'.
	(w3m-about-db-history): Ditto.

	* w3m-dtree.el (w3m-about-dtree): Ditto.

	* w3m-weather.el (w3m-about-weather): Call `w3m-decode-buffer'.

2001-05-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m): Popup a new frame if there is neither a window nor
	a frame associated with w3m and `w3m-pop-up-frames' is non-nil;
	refer to `w3m-pop-up-frame-parameters' when creating a new w3m
	frame.
	(w3m-pop-up-frame-parameters): New user option which allows a
	kludge that it can be either an alist or a plist.
	(w3m-pop-up-frames): New user option.

	* w3m-e21.el (w3m-setup-header-line): Replace "%" with "%%" in an
	url string.

2001-05-23  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-read-coding-system): Removed.
	(w3m-process-environment): New variable.
	(w3m-input-coding-system): Changed default value.
	(w3m-output-coding-system) [w3mmee]: Changed default value.
	(w3m-arrived-add-1): Changed argument spec.
	(w3m-arrived-add): Ditto.
	(w3m-arrived-coding-system): Removed.
	(w3m-arrived-content-charset): New function.
	(w3m-arrived-setup): Changed arrived file format to keep
	content-charset instead of coding-system.
	(w3m-arrived-shutdown): Ditto.
	(w3m-exec-process): Refer `w3m-process-environment' to set
	environments for sub-processes.
	(w3m-decode-encoded-contents): Ditto.
	(w3m-coding-system-to-charset): Removed.
	(w3m-read-content-charset): New function.
	(w3m-decode-buffer): Changed argument spec.  Process this buffer
	if and only if it's represented in unibyte.
	(w3m-rendering-region): Reconstruced.
	(w3m-exec): Changed argument spec and followed the change of
	`w3m-decode-buffer'.
	(w3m-goto-url): Changed argument spec and followed the change of
	`w3m-exec'.
	(w3m-redisplay-with-coding-system): Removed.
	(w3m-redisplay-with-charset): New command to replace
	`w3m-redisplay-with-coding-system'.
	(w3m-region): No call `encode-coding-region'.
	(w3m-about-history): Ditto.
	(w3m-about-db-history): Ditto.

	* w3m-antenna.el (w3m-about-antenna): No call
	`encode-coding-region'.

	* w3m-dtree.el (w3m-about-dtree): Ditto.

	* w3m-om.el (w3m-read-coding-system): Removed.
	(coding-system-list): New function.

	* shimbun/shimbun.el (shimbun-retrieve-url): Decode contents which
	is retrieved by `w3m-retrieve'.

2001-05-23  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-expand-file-name-as-url): If file is directory,
	expand to use 'about://dtree'.
	(w3m-local-content-type): If url is directory or 'about://dtree/",
	return "text/html" type.
	(w3m-goto-url): If URL is local and directory, change URL
	'file://' to 'about://dtree'.
	(w3m-halfdump-command): New variable.
	(w3m-halfdump-command-arguments): Change to defvar.
	(w3m-halfdump-command-common-arguments): New constant, common
	arguments for 'halfdump' execution of all w3m variants.
	(w3m-rendering-region): Use 'w3m-halfdump-command' if
	setted. Change call process arguments.
	(w3m-lynx-like-map): Add w3m-gohome() keybind.
	(w3m-info-like-map): Add w3m-dtree() and w3m-edit-this-url()
	keybind. Use w3m-gohome() instead of lamda expression.
	(w3m-mode): Modify doc-string.

	* w3m-dtree.el (w3m-about-dtree): Modify message.

2001-05-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-unoptimize-animated-gif): New function which is
	separated from `w3m-create-image'; improve a way to check whether
	a data should be unoptimized or not.
	(w3m-create-image): Use it.

2001-05-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-create-image): Attempt to extract the first
	frame of an animated gif when the unoptimization is failed.

2001-05-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-add-text-properties): Don't specify `end-open' nor
	`front-nonsticky' that are the default.
	(w3m-emacs-w3m-icon): Colorized.

2001-05-22  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-cache-contents): Don't insert additional '\n' for
	binary data.

2001-05-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el: Don't make the coding-system `w3m-euc-japan' if it
	already exists to make w3m.el reloadable in Emacs 20.

2001-05-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-about): Put an icon image as about://emacs-w3m.gif.
	(w3m-retrieve): Make an exception of about://emacs-w3m.gif.
	(w3m-attributes): Ditto.
	(w3m-emacs-w3m-icon): New constant for about://emacs-w3m.gif.

2001-05-22  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/shimbun.el (shimbun-retrieve-url): Decode buffer with
	w3m-output-coding-system.
	(shimbun-retrieve-url-buffer): Ditto.

	* w3m.el (w3m-region): Call w3m-render-region for the region
	from `point-min' to `point-max' because buffer is already narrowed.

	* shimbun/sb-fml.el (shimbun-make-contents): Don't make new header
	structure.
	(shimbun-make-contents): Process content as HTML.

2001-05-21  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-w3m-dev.el: New file.

	* shimbun/sb-fml.el (shimbun-make-contents): Use `delete-region'
	instead of `kill-line' not to destroy kill-ring.

2001-05-22  Hideyuki SHIRAI  <shirai@meadowy.org>

	* mew-w3m.el (mew-mime-text/html-w3m): Fix condition when
	mew-mime-text/html() call, again. Avoid byte-compile warning when
	compiling.

2001-05-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-make-html-contents): Define it before
	it is used.
	(shimbun-make-html-contents): Ditto.

2001-05-21  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Add support code of w3mmee.  Reorganaized codes to
	handle content types and coding systems which are specified by user.
	(toplevel): Require 'pccl.
	(w3m-type): New user option.
	(w3m-mnc): Removed user option.
	(w3m-linefeed-type): Removed variable.
	(w3m-dump-head-source-option): Ditto.
	(w3m-decode-all-to-this-charset): Ditto.
	(w3m-halfdump-option): Ditto.
	(w3m-halfdump-expand-options): Ditto.
	(w3m-extended-characters-table): Ditto.
	(w3m-command): Refer `w3m-type' to decide default value.
	(w3m-command-arguments): Ditto.
	(w3m-output-coding-system): Changed default value to `w3m-euc-japan'.
	(w3m-profile-directory): Refer `w3m-command' to decide default value.
	(w3m-default-save-directory): Ditto.
	(w3m-dump-head-source-command-arguments): New constant.
	(w3m-halfdump-command-arguments): Refer `w3m-type' to decide default value.
	(w3m-arrived-add-1): Add an argument `content-type'.
	(w3m-arrived-add): Likewise and follow change of `w3m-arrived-add-1'.
	(w3m-arrived-coding-system): Strict checking of return value.
	(w3m-arrived-content-type): New function.
	(w3m-arrived-setup): Follow change of `w3m-arrived-add'.
	(w3m-arrived-shutdown): Ditto.
	(w3m-exec-process): Set process environment to avoid unexpected
	conversion in Windows.
	(w3m-charset-to-coding-system): New function.
	(w3m-decode-encoded-contents): Old name is `w3m-decode-encoded-buffer'.
	Set process environment to avoid unexpected conversion in Windows.
	(w3m-local-retrieve). Simplified.
	(w3m-pretty-length): Removed.
	(w3m-crlf-to-lf): Removed.
	(w3m-w3m-dump-head-source): No call `w3m-crlf-to-lf'.
	(w3m-w3m-dump-source): Ditto.
	(w3m-w3m-retrieve) Removed optional argument `cs' and simplified.
	(w3m-retrieve): Ditto.
	(w3m-decode-extended-characters): Removed.
	(w3m-euc-japan-decoder): New CCL program.
	(w3m-euc-japan-encoder): Dummy CCL program.
	(w3m-euc-japan): New coding system.
	(w3m-rendering-region): New optional argument `charset' and
	support codes of `w3mmee' are added.  Handle new defintion style
	of `w3m-halfdump-command-arguments'.  Refer `w3m-euc-japan' to
	process outputs of `w3m'.
	(w3m-exec): Reconstructed.  This accepts new optional argument
	`content-type'.
	(w3m-goto-url): Reconstructed to handle files which have unknown
	cotent-types.
	(w3m-redisplay-with-coding-system): Simplified.
	(w3m-find-file): Simplified and optional argument `type' is
	removed.
	(w3m-region): Encode output buffer into `w3m-input-coding-system'.
	(w3m-about-history): Ditto.
	(w3m-about-db-history): Ditto.

	* w3m-antenna.el (w3m-about-antenna): Encode output buffer into
	`w3m-input-coding-system'.

	* w3m-dtree.el (w3m-about-dtree): Ditto.

	* mime-w3m.el (mime-w3m-cid-retrieve): Changed spec of arguments.

	* mew-w3m.el (mew-w3m-cid-retrieve): Ditto.

2001-05-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-toggle-inline-images): Message "Showing...".

	* w3m-xmas.el (w3m-create-image): Unoptimize animated GIFs using
	gifsicle program.
	(w3m-cache-unoptimized-gif-images-max-length): New variable.
	(w3m-cache-unoptimized-gif-images): New variable.
	(w3m-gifsicle-program): New variable.
	(w3m-should-unoptimize-animated-gifs): New variable.

2001-05-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-fontify): Don't initialize the value of
	`w3m-cache-underline-faces' here.
	(w3m-toggle-inline-images): Run the following new hooks instead of
	to hide/show underlines behind inline images here.
	(w3m-cache-underline-faces): Variable moved to w3m-e21.el.
	(w3m-remove-inline-images-after-hook): New hook.
	(w3m-remove-inline-images-before-hook): New hook.
	(w3m-show-inline-images-after-hook): New hook.
	(w3m-show-inline-images-before-hook): New hook.

	* w3m-e21.el: Use `w3m-remove-inline-images-after-hook',
	`w3m-show-inline-images-after-hook',
	`w3m-show-inline-images-before-hook' and `w3m-fontify-before-hook'
	to fix the undesirable feature of Emacs 21 that to show an
	underline of a text even if it has an image as a text property.
	(w3m-cache-underline-faces): Variable moved from w3m.el.

2001-05-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/shimbun.el (shimbun-article-url): Fixed problem when
	shimbun-header-xref returns nil.

2001-05-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-cache-underline-faces): Modified docs that it is for
	Emacs 21's exclusive use.

2001-05-18  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* shimbun/sb-hns.el (shimbun-get-headers): Fixed problem when
	title have anchor.

2001-05-18  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-dtree.el (w3m-dtree-indent): Remove variable.
	(w3m-dtree-fancy-display): Ditto.
	(w3m-dtree-indent-strings): New variable.
	(w3m-dtree-create-fancy): Remove function.
	(w3m-dtree-create-sub): Rename function from w3m-dtree-create-fancy()
	and tiny modified.
	(w3m-about-dtree): Remove 'fancy style' method.

2001-05-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-gnome.el (toplevel): Require 'sb-mhonarc.

2001-05-18  Hideyuki SHIRAI  <shirai@meadowy.org>

	* icons/db-history-up.xpm: Change color.

	* mew-w3m.el (mew-mime-text/html-w3m): Fix condition when
	mew-mime-text/html() call.

2001-05-18  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-find-file): Improved.
	(w3m-default-content-type): New user option.
	(w3m-url-completion): New function.
	(w3m-input-url): Call `w3m-url-completion' to complete URLs.

2001-05-17  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-find-file): New optional argument, `type' is added.

2001-05-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-add-arrived-db): Improve the madness.

	* w3m.el (w3m-about-history): Add small indentation to sub trees.

2001-05-17  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-about-db-history): Modify display format for no folding.

2001-05-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-about-history): New implementation.
	(w3m-about-history-indent-level): New variable.
	(w3m-about-history-max-indentation): New variable.

	* icons/history-up.xpm: Replaced a pixmap with a new pattern.

2001-05-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-dtree.el (w3m-dtree-default-allfiles): Modify default value.
	(w3m-dtree-fancy-display): New variable.
	(w3m-dtree-create-fancy): New function.
	(w3m-dtree-create-sub): Insert the indicator which directory or file,
	if allfiles.
	(w3m-about-dtree): Use fancy style function, if
	'w3m-dtree-fancy-display' is non-nil.

2001-05-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m): Use existing frame or window.

2001-05-16  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-dtree.el (w3m-dtree-create): Fix HTML bug.

2001-05-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-cache-underline-faces): Added docs that it is
	currently needed for only pretest versions of Emacs 21.
	(w3m-fontify-anchors): Don't fontify the trailing white spaces of a
	href.
	* w3m-xmas.el (w3m-insert-image): Don't handle underline faces.
	* w3m-e21.el (w3m-insert-image): Simplified.

2001-05-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-setup-header-line, w3m-exec, w3m-decode-entities):
	Replace `add-text-properties' with `w3m-add-text-properties'.
	(w3m-fontify-images, w3m-fontify-anchors): Ditto.
	(w3m-setup-header-line, w3m-cache-contents, w3m-refontify-anchor):
	Replace `put-text-property' with `w3m-add-text-properties'.
	(w3m-toggle-inline-images, w3m-fontify-anchors): Ditto.
	(w3m-fontify-underline, w3m-fontify-bold): Ditto.
	(w3m-add-text-properties): New macro used to put non-sticky text
	properties.

	* w3m-xmas.el (w3m-setup-header-line): Don't put non-sticky text
	property here.

2001-05-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* mew-w3m.el (mew-w3m): Typo fix.

2001-05-16  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-bookmark.el (w3m-bookmark-default-section): Changed
	initialization order.

2001-05-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-dtree.el (w3m-dtree-create): Modify warning message.
	(w3m-about-dtree): Set path to directory name.

2001-05-16  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el, w3m-antenna.el, w3m-bookmark.el, w3m-dtree.el,
	w3m-search.el, w3m-weather.el: Fixed document strings of
	functions.

	* mew-w3m.el (mew-w3m): New customize group.
	(mew-use-w3m-minor-mode): Use defcustom.
	(mew-w3m-auto-insert-image): Use defcustom.

2001-05-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-goto-url): Set 'default-directory' to
	'w3m-profile-directory', if 'url' is local but not exist that directory.

	* w3m-dtree.el (w3m-dtree-create): If 'path' is not a directory,
	display warning message.

2001-05-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-fontify): Initialize the value of
	`w3m-cache-underline-faces'.
	(w3m-toggle-inline-images): Remove or restore the underlined faces.
	(w3m-cache-underline-faces): New buffer-local variable used to
	cache the detached underlined faces from a buffer.

	* w3m-xmas.el (w3m-insert-image): Detach an underlined face in
	`w3m-cache-underline-faces'.
	* w3m-e21.el (w3m-insert-image): Ditto.

2001-05-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-toggle-inline-images): Restore hidden faces in the
	text property `w3m-hidden-face'.

	* w3m-xmas.el (w3m-setup-header-line): Don't inherit existing text
	properties in a header line.

	* w3m-xmas.el (w3m-insert-image): Hide a face in the text property
	`w3m-hidden-face' if it is underlined, instead of the removing.
	* w3m-e21.el (w3m-insert-image): Ditto.

2001-05-15  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (top-level): Fixed argument of autoload for `w3m-dtree',
	and added autoload for `w3m-about-dtree'.

	* w3m-dtree.el (w3m-dtree): Fixed doc-string.

2001-05-15  "Takayuki Nakagawa"  <tknakaga@kanagawa.hitachi.co.jp>

	* w3m.el (w3m-goto-ftp-url): Use `file-directory-p' instead of
	file name suffix to distinguish directories and files.
	(w3m-time-parse-string (for buggy timezone.el)): Ignore errors
	occured in `encode-time'.

2001-05-15  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-dtree.el (top-level): Require `w3m' to suppress byte-compile
	warnings.

2001-05-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-view-this-url): Message if there is no link.
	(w3m-cursor-anchor): Redefine as a macro for byte-optimization.
	(w3m-action, w3m-image, w3m-anchor): Redefine as a macro using
	`w3m-get-text-property-around'.
	(w3m-get-text-property-around): New macro.

2001-05-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-exec): Report a process exit status if an error has
	occurred.
	(w3m-download): Ditto.
	(w3m-w3m-dump-source): Don't use `zerop' to check for a process
	exit status.
	(w3m-w3m-dump-head-source): Ditto.
	(w3m-w3m-get-header): Ditto.
	(w3m-exec-process): Made it to return t if succeeded otherwise nil,
	to keep a process exit status in `w3m-process-exit-status'.
	(w3m-process-exit-status): New variable.

2001-05-15  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (TOP): Add autoload for w3m-dtree.
	(w3m-url-to-file-name): If URL is started 'about://dtree', it convert
	to local file. Change [A-z] to [A-Za-z].
	(w3m-url-local-p): If URL is started 'about://dtree', it assume to
	local file.
	(w3m-prog-dtree): Delete variable.
	(w3m-about-history-ignored-regexp): Delete constant.
	(w3m-arrived-ignored-regexp): New constant.
	(w3m-history-ignored-regexp): New constant.
	(w3m-arrived-add): Use 'w3m-arrived-ignored-regexp' instead of
	'w3m-about-history-ignored-regexp'.
	(w3m-arrived-p): Ditto.
	(w3m-parse-attributes): Change [A-z] to [A-Za-z].
	(w3m-fontify): Ditto.
	(w3m-external-view): Remove 'about://dtree' handling.
	(w3m-about-history): Use 'w3m-history-ignored-regexp' instead of
	'w3m-about-history-ignored-regexp'.
	(w3m-about-db-history): Ditto.
	(w3m-about-dtree): Move to 'w3m-dtree.el'.
	(w3m-dtree): Ditto.

	* w3m-dtree.el: New file.

2001-05-11  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-cursor-anchor): New defsubst.
	(w3m-fontify-anchors): Add 'w3m-cursor-anchor property for
	w3m-goto-(next|previous)-anchor.
	(w3m-goto-anchor-hist): New buffer local variable.
	(w3m-goto-next-anchor): Use 'w3m-cursor-anchor property.
	(w3m-goto-previous-anchor): Ditto.
	(w3m-next-anchor): Don't stop divided anchor using
	'w3m-goto-anchor-hist'.
	(w3m-previous-anchor): Ditto.

	* w3m-form.el (w3m-fontify-forms): Add 'w3m-cursor-anchor property for
	w3m-goto-(next|previous)-anchor.

2001-05-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-copy): New implementation without
	recursive funcall'ing using `w3m-history-tree'.
	(w3m-history-tree): Allow the optional argument `newpos'.
	(w3m-history-copy-1): Removed.

	* w3m.el (w3m-gohome): New command.
	(w3m-setup-menu): Use `w3m-menubar'.
	(w3m-menubar): New constant.
	(w3m-toolbar): Added "copy"; use `w3m-gohome'.
	(w3m-toolbar-buttons): Added "copy".

	* w3m-xmas.el (w3m-setup-menu): Moved menubar definition to w3m.el.

	* icons/copy-up.xpm: New file.

2001-05-11  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-antenna.el (w3m-antenna-last-modified): When specified URL
	is not found, returns t.
	(w3m-antenna-check-sites): When the checking site is not found,
	use old record.
	(w3m-about-antenna): Excess arguments are ignored.

2001-05-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-insert-image): Remove `face' property from a
	text behind an image.

	* w3m-e21.el (w3m-remove-image): Use a regular plist in the arg of
	`remove-text-properties'.
	* w3m.el (w3m-toggle-inline-images): Ditto.

2001-05-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-impress.el (shimbun-impress-x-face-alist): New variable.

2001-05-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el (w3m-insert-image): Remove `face' property from a text
	behind an image.

2001-05-10  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el:
	(w3m-dump-head-source-option): New variable.
	(w3m-decode-all-to-this-charset): Ditto.
	(w3m-halfdump-option): Ditto.
	(w3m-halfdump-expand-options): Ditto.
	(w3m-edit-function): Ditto.
	(w3m-prog-dtree): Ditto.
	(w3m-halfdump-command-arguments): Remove "-halfdump".
	(w3m-fontify): Display minibuffer messages.
	(w3m-decode-buffer): Use w3m-decode-all-to-this-charset, when its non-nil.
	(w3m-local-retrieve): If file is directory, return 'nil'.
	(w3m-w3m-dump-head-source): Use 'w3m-dump-head-source-option' instead of
	"-dump_extra".
	(w3m-rendering-region): Use 'w3m-halfdump-option',
	'w3m-halfdump-command-arguments' and 'w3m-halfdump-expand-options',
	when call-process.
	(w3m-exec): Add no-cache option for w3m-dtree when call
	w3m-external-view().
	(w3m-external-view): Add no-cache option. If url is local directory,
	call w3m-dtree().
	(w3m-print-this-url): Expand output message.
	(w3m-edit-current-url): Use 'w3m-edit-function' instead of
	find-file().
	(w3m-edit-this-url): New function.
	(w3m-goto-next-anchor): Input form support.
	(w3m-goto-previous-anchor): Ditto.
	(keymap): Add w3m-edit-current-url() and w3m-edit-this-url().
	(w3m-mode): Modify doc-string for new functions.
	(w3m-view-header): Modify doc-string.
	(w3m-history): Add doc-string.
	(w3m-about-dtree): New function.
	(w3m-dtree): Ditto.

2001-05-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-flat): Don't funcall itself recursively.

	* w3m.el (w3m-fontify-images): Only put text properties `w3m-image'
	and `w3m-image-redundant' if there is a property `w3m-href-anchor'.

2001-05-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-tree): New function.

2001-05-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-setup-menu): Don't set up menu if it has already been
	available.

	* w3m.el (w3m-setup-menu): Locate W3M menu in the forefront of the
	menubar.
	* w3m-xmas.el (w3m-setup-menu): Ditto.

2001-05-08  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-mode): Modify doc-string for describe mode, again.

2001-05-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-impress.el (shimbun-get-headers): Remove CRLF characters
	from subject string.

2001-05-08  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-hns.el (shimbun-hns-article): Support "RLNEW".
	(shimbun-article): Fixed problem when header contain multibyte string.

2001-05-08  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-form.el (top-level): Modify string to 'iso-2022-7bit' for
	set-auto-coding.
	(w3m-form-make-get-string): Guard error in w3m-url-encode-string()
	reported [emacs-w3m:00686].

2001-05-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-about-history): Run `set-buffer-multibyte' after
	`erase-buffer' is done.

2001-05-07  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-hns.el (shimbun-hns-group-alist): Added X-FACE element.
	(shimbun-article): Use `encode-coding-string' instead of
	`encode-coding-region'.
	(shimbun-x-face): Define.

	* shimbun/shimbun.el (shimbun-header-insert): Use shimbun-x-face
	instead of shimbun-x-face-internal.
	(shimbun-open-group): Don't setup x-face slot.
	(shimbun-x-face): New generic function.
	(shimbun-x-face): Define.

	* shimbun/sb-tcup.el (shimbun-tcup-url): Eliminated.
	(shimbun-tcup-groups): Ditto.
	(shimbun-groups): Define.

	* w3m.el (w3m-w3m-retrieve): Fixed problem when no-cache is non-nil
	and w3m-content-type returns nil.

2001-05-07  Taiki SUGAWARA <taiki.s@cityfujisawa.ne.jp>

	* shimbun/sb-tcup.el: Changes for other tcup groups [emacs-w3m: 00713].
	(shimbun-tcup-group-alist): Define as variable;
	Changed structure.
	(shimbun-tcup-subject-regexp): New variable.
	(shimbun-tcup-from-start-regexp): Ditto.
	(shimbun-tcup-date-start-regexp): Ditto.
	(shimbun-tcup-body-start-regexp): Ditto.
	(shimbun-tcup-body-end-regexp): Ditto.
	(shimbun-tcup-get-group-key): Follow changes above.
	(shimbun-headers): Ditto.

2001-05-06  Mito <mit@nines.nec.co.jp>

	* shimbun/sb-hns.el (shimbun-hns-x-face-alist): New variable.

	* shimbun/sb-tcup.el (shimbun-tcup-x-face-alist): Ditto.
	(shimbun-tcup-group-alist): Renamed 'yutopia' to 'meadow';
	Added new group 'yutopia'.

2001-05-07  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* shimbun/shimbun.el (shimbun-expand-url): Define as an alias for
	`w3m-expand-url'.

	* shimbun/sb-hns.el (shimbun-get-headers): Set proper url to xref.
	(shimbun-hns-article): Follow the change above.
	(shimbun-article): Encode headers.

2001-05-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-search.el (top-level): Removed magic string to decide coding
	system.

	* w3m-xmas.el (top-level): Ditto.

	* w3m-e21.el (top-level): Ditto.

2001-05-07  Masatake YAMATO  <jet@gyve.org>

	* w3m-xmas.el (w3m-setup-menu): Implemented.

2001-05-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-w3m-attributes): Check validity of contents length,
	to avoid the problem reported in [emacs-w3m:00682].

2001-05-07  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-bookmark.el (w3m-bookmark-section-history): Revival.
	(w3m-bookmark-title-history): Ditto.

	* w3m.el (w3m-extended-characters-table): Add "\x90" entry.
	(w3m-setup-menu): Move from w3m-e21.el.
	(w3m-mode): Modify doc-string for describe mode.
	(top-level): Add key-bind, w3m-antenna(), w3m-weather() and w3m-search().
	(w3m-about-history): Set w3m work buffer as multibyte.

	* w3m-e21.el (w3m-setup-menu): Move to w3m.el.

2001-05-03  Masatake YAMATO  <jet@gyve.org>

	* w3m.el (w3m-mode): Call w3m-setup-menu.

	* w3m-xmas.el (w3m-setup-menu): New stub.

	* w3m-e21.el (w3m-setup-menu): New function.

2001-04-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-about-history): Replace ">" with "&gt;".

2001-04-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-about-history): New implementation without recursive
	funcall'ing.
	(w3m-about-history-1): Removed.

2001-04-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-gnome.el (shimbun-get-headers):
	Retrieve index as binary and decode with shimbun-gnome-coding-system.

	* shimbun/sb-xemacs.el (shimbun-get-headers): Likewise;
	MIME encode 'from' string.

2001-04-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-goto-ftp-url): Don't give a url string to the
	function `file-name-nondirectory'.

2001-04-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-about-history): Enhance the last link.
	(w3m-arrived-p): Return non-nil when url matches
	`w3m-about-history-ignored-regexp'.
	(w3m-arrived-add): Don't put url into an arrived-db when url
	matches `w3m-about-history-ignored-regexp'.
	(w3m-about-history-ignored-regexp): Renamed from
	`w3m-about-history-except-regex'.

	* w3m-hist.el (w3m-history-restore-position): Instruct
	`w3m-history-plist-get' to work with buffer-local properties.
	(w3m-history-store-position): Instruct `w3m-history-add-properties'
	to work with buffer-local properties.
	(w3m-history-remove-properties): Allow the optional arg `local'.
	(w3m-history-add-properties): Ditto.
	(w3m-history-plist-put): Ditto.
	(w3m-history-plist-get): Ditto.
	(w3m-history-copy): Remove buffer-local properties.
	(w3m-history-flat): Made it to have buffer-local properties.

2001-04-24  Hideyuki SHIRAI  <shirai@meadowy.org>

	* mew-w3m.el (mew-mime-text/html-w3m): Support Mew 1.95b120 or later.

2001-04-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-quit): Clear the echo area just after prompting.
	(w3m-save-list): Format a list by itself instead of the use of pp.

2001-04-24  Yuuichi Teranishi  <yuuichi@elmo.templewest.net>

	* shimbun/sb-yomiuri.el (shimbun-get-headers): Fixed regexp for "fuho"
	group.

2001-04-24  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-0.2.1-mnc.patch: See [emacs-w3m:00629].

2001-04-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-goto-url): Use `w3m-history-store-position' instead
	of `w3m-arrived-store-position'.
	(w3m-lynx-like-map): Bind `w3m-history-restore-position' instead of
	`w3m-view-previous-point' for the key `C-c C-b'; new key
	`C-c C-SPC' to bind the command `w3m-history-store-position'.
	(w3m-view-previous-point): Removed.
	(w3m-view-next-page): Use `w3m-history-restore-position' instead of
	`w3m-arrived-restore-position'.
	(w3m-view-previous-page): Ditto.
	(w3m-arrived-restore-position): Removed.
	(w3m-arrived-store-position): Removed.

	* w3m-hist.el (w3m-history-add-arrived-db): Don't specify the 2nd
	arg in `w3m-history-push'; specify the 2nd in
	`w3m-history-backward'.
	(w3m-history-restore-position): New command.
	(w3m-history-store-position): New command.
	(w3m-history-plist-put): Use `w3m-history-modify-properties'.
	(w3m-history-plist-get): Don't specify the 3rd arg in
	`w3m-history-assoc'.
	(w3m-history-push): Allow the optional arg `replace-props'; use
	`w3m-history-modify-properties'.
	(w3m-history-assoc): Allow the optional arg `replace-props'; always
	modify the properties of a history element; use
	`w3m-history-modify-properties'.
	(w3m-history-backward): Allow the optional arg `set-current'; don't
	modify the position pointer of `w3m-history' normally; use
	`w3m-history-save-position'.
	(w3m-history-forward): Ditto.
	(w3m-history-with-element): Don't specify the 3rd arg in
	`w3m-history-assoc'.
	(w3m-history-modify-properties): New macro.
	(w3m-history-save-position): New macro.

2001-04-23  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-xmas.el (w3m-setup-header-line): Check `major-mode' to decide
	whether header line should be set up.

	* shimbun/shimbun.el (shimbun-retrieve-url): Added optional argument
	no-decode.
	(shimbun-retrieve-url-buffer): Ditto.

	* shimbun/sb-tcup.el (shimbun-headers): Define;
	Retrieve headers as binary and decode with shimbun-tcup-coding-system.
	(shimbun-get-headers): Eliminated.

2001-04-23  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-linefeed-type): Change default value.

	* w3m-0.2.1-mnc.patch: Define setmode(fileno(stdout), O_BINARY) if
	win32 or OS/2. Define lrand48() and srand48() used if they don't have.

2001-04-23  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-about-db-history): Set w3m work buffer as multibyte.

2001-04-23  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-info-like-map): Changed key of `w3m-reload-this-page'.

2001-04-20  Taiki SUGAWARA <taiki.s@cityfujisawa.ne.jp>

	* w3m.el (w3m-expand-file-name-as-url): Use "file:///cygdrive/"
	instead of "/cygdrive/" when `w3m-use-cygdrive' is non-nil.

2001-04-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-add-arrived-db): New command.

	* w3m.el (w3m-db-history): New command.
	(w3m-about-history, w3m-about-history-1): Don't deactivate
	"about://*" links.
	(w3m-exec): Share a url string between the variable
	`w3m-current-url' and the history structure.
	(w3m-toolbar, w3m-toolbar-buttons): Added history and db-history.

	* icons/db-history-up.xpm: New file.
	* icons/history-up.xpm: New file.

2001-04-20  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-view-source): Don't execute if can't load its source.
	(w3m-view-header):  Don't execute if can't load its header. Toggle
	html/header if execute twice.

2001-04-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-goto-url): Use `set-text-properties' to remove all
	text props from url string.
	(w3m-exec): Use `add-text-properties' instead of
	`set-text-properties'.
	(w3m-w3m-dump-source, w3m-w3m-dump-head-source): Removed not-used
	bound variable `w3m-w3m-retrieve-length'.
	(w3m-cache-request-contents): Removed not-used bound variables
	`type' and `charset'.
	(w3m-entity-value): Removed not-used bound variable `sym'.
	(w3m-arrived-add): Use `w3m-arrived-add-1'; don't funcall itself
	recursively to get rid of redundancy; don't use
	`set-text-properties' here.
	(w3m-arrived-add-1): New macro.

	* w3mhack.el (XEmacs): Byte-optimize `set-text-properties' to make
	the program run a little bit faster.

2001-04-19  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-use-cygdrive): Change default value.
	(w3m-linefeed-type): New customize variable.
	(w3m-executable-type): Remove variable.
	(w3m-crlf-to-lf): Use 'w3m-linefeed-type' instead of
	'w3m-executable-type'.

2001-04-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el: Byte-optimize `match-string-no-properties' not to use
	`set-text-properties' under XEmacs.

2001-04-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-hns.el (shimbun-close): Define (clean up content-hash).
	(shimbun-article): Avoid an error when article does not exist.
	(shimbun-hns-article): Reload page for article.

2001-04-19  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* shimbun/sb-hns.el (shimbun-get-headers): Generate pseudo time
	using section number of article for sorting by date.

2001-04-19  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-setup-header-line): Check `major-mode' to decide
	whether header line should be set up.

	* mime-w3m.el (mime-w3m-use-header-line): Removed.
	(mime-w3m-preview-text/html): Canceled last change.

2001-04-18  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-mode-map): Initialize when source file is loaded.

	* mime-w3m.el (mime-w3m-mode-map): Simplify.

	* mew-w3m.el (TopLevel): Initialization code of `w3m-mode-map' is
	removed.

	* w3m.el, w3m-weather.el, w3m-filter.el, w3m-form.el: Change
	coding-system.

	* mime-w3m.el (mime-w3m-use-header-line): New user option.
	(mime-w3m-preview-text/html): Refer `mime-w3m-use-header-line' to
	control `w3m-use-header-line'.

2001-04-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist: Made the history management system to keep properties
	of each history element to be shared by all the w3m buffers.
	(w3m-history-remove-properties): Share properties.
	(w3m-history-add-properties): Ditto.
	(w3m-history-plist-put): Ditto.
	(w3m-history-copy, w3m-history-copy-1): Ditto.
	(w3m-history-push): Ditto.
	(w3m-history-assoc): Ditto.
	(w3m-history-share-properties): New function.
	(w3m-history-seek-properties): New function.

	(w3m-history-rename-url): Allow the 4th arg `this-buffer'.
	(w3m-history-with-element): Renamed from
	`w3m-history-with-elements'; bind only the variable `element' to
	have a history element of `w3m-history-flat'.

2001-04-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-hns.el: New file.

	* shimbun/shimbun.el (shimbun-groups): Define as generic function.
	(shimbun-open-group): Use `shimbun-groups' instead of
	`shimbun-groups-internal'.

	* shimbun/shimbun.el (shimbun-header-insert): Added argument `shimbun'.
	Use `shimbun-article-url' instead of `shimbun-header-xref' for the Xref
	field.
	* shimbun/sb-fml.el (shimbun-make-contents): Follow the change above.
	* shimbun/sb-text.el (shimbun-make-contents): Ditto.
	* shimbun/sb-tcup.el (shimbun-article): Ditto.
	* shimbun/sb-mhonarc.el (shimbun-make-contents): Ditto.

	* shimbun/shimbun.el (shimbun-header-insert): Insert x-face field.
	(shimbun-make-html-contents): Don't insert x-face field.

	* shimbun/sb-text.el (shimbun-make-contents): Don't insert x-face
	field.

	* shimbun/sb-namazu.el (shimbun-namazu-url): Deleted last '/'.
	(shimbun-index-url): Follow the change above.
	(shimbun-reply-to): Define.

2001-04-18  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-setup-header-line): Don't execute the setup-header-line,
	if w3m-current-url is 'nil'.

	* w3m-xmas.el (w3m-setup-header-line): Ditto.

2001-04-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-fontify-images): Use `match-string-no-properties'
	instead of `buffer-substring-no-properties'.
	(w3m-parse-attributes): Use `match-string-no-properties' instead of
	`match-string' to remove text properties.

	* w3m-xmas.el: Require `poe' for the function
	`match-string-no-properties'.

2001-04-17  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-impress.el: New file.

2001-04-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-setup-header-line): New function except for Emacs 21
	nor XEmacs.
	(w3m-header-line-map): New variable except for Emacs 21 nor XEmacs.
	(w3m-fontify-after-hook): Use it for emulating a header-line.
	(w3m-header-line-location-content-face): New face except for Emacs
	21.
	(w3m-header-line-location-title-face): Ditto.
	(w3m-use-header-line): Moved from w3m-e21.el.

	* w3m-xmas.el (w3m-setup-header-line): New function.
	(w3m-header-line-map): New variable.

	* w3m-e21.el (w3m-use-header-line): Moved to w3m.el.

2001-04-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* icons/parent-up.xpm: Reduced color depth.
	* icons/parent-disabled.xpm: Renamed from parent-down.xpm.

2001-04-16  Masatake YAMATO  <masata-y@gyve.aist-nara.ac.jp>

	* w3m.el (w3m-toolbar): Added w3m-toolbar-parent-icon.
	(w3m-toolbar-buttons): Added "parent".
	(w3m-parent-page-available-p): New function.

	* icons/parent-up.xpm: New file.
	* icons/parent-down.xpm: New file.

2001-04-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-about-history): Set w3m work buffer as multibyte.

2001-04-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-about-history-1, w3m-about-history): Deactivate all
	"about://*" links.

2001-04-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-gnome.el: New file.
	(shimbun-gnome-groups): Removed duplicated "wm-spec-list".

	* shimbun/shimbun.el (shimbun-reply-to): New generic function.

	* shimbun/sb-mhonarc.el (shimbun-make-contents): Add "Reply-To" field.

	* shimbun/sb-airs.el (shimbun-airs-group-path-alist): Add reply-to
	information.
	(shimbun-airs-concat-url): Follow the change above.
	(shimbun-reply-to): Define.

2001-04-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-about-history-1): New internal function.
	(w3m-about-history): Use it.

2001-04-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-wired.el (shimbun-get-group-header-alist): Jump to the
	article start point before getting headers.

2001-04-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-e21.el (w3m-header-line-location-title-face): New face.
	(w3m-header-line-location-content-face): Ditto.
	(w3m-use-header-line): New user option.
	(w3m-setup-header-line): New function.
	(w3m-mode-hook): Add `w3m-setup-header-line'.

	* shimbun/sb-airs.el (shimbun-airs-coding-system): Fixed redundant
	definition.
	* shimbun/sb-yomiuri.el (shimbun-yomiuri-coding-system): Ditto.
	* shimbun/sb-wired.el (shimbun-wired-coding-system): Ditto.
	* shimbun/sb-sponichi.el (shimbun-sponichi-coding-system): Ditto.
	* shimbun/sb-netbsd.el (shimbun-netbsd-coding-system): Ditto.
	* shimbun/sb-cnet.el (shimbun-cnet-coding-system): Ditto.
	* shimbun/sb-bbdb-ml.el (shimbun-bbdb-ml-coding-system): Ditto.

	* shimbun/sb-mew.el: Fixed.

2001-04-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-xemacs.el (shimbun-get-headers): Undo last change.

	* shimbun/sb-airs.el (shimbun-get-headers): Ditto.

	* shimbun/shimbun.el (shimbun-retrieve-url): Copy buffer content only
	if it is not the work buffer of w3m.

	* shimbun/sb-xemacs.el (shimbun-get-headers): Retrieve header
	to the temp buffer.

	* shimbun/sb-airs.el (shimbun-get-headers): Ditto.

	* shimbun/shimbun.el (shimbun-retrieve-url-buffer):
	Return an empty buffer when `w3m-retrieve' returns nil.

2001-04-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-about-history): Show a history tree (incompleted).
	(w3m-exec): Put a title string into the history structure.

2001-04-12  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-airs.el (shimbun-get-headers): Stop when
	`shimbun-search-id' returns non-nil.

2001-04-12  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-about-db-history): Change the format on display.

2001-04-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-om.el (w3m-icon-directory): Define it as the constant nil
	to avoid byte-compile warnings when compiling.
	* w3m.el (w3m-icon-directory): Undo last change.

2001-04-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-icon-directory): Hide the actual function name
	`locate-data-directory' for old Emacsen to avoid byte-compile
	warnings.

	* w3m-om.el (w3m-om-define-missing-widgets): New function.
	(TopLevel): Use it for defining some missing widgets after the
	library wid-edit is loaded.

2001-04-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/shimbun.el (shimbun-index-url): Removed method definition.

	* shimbun/sb-fml.el (shimbun-index-url): Define.

	* shimbun/sb-asahi-html.el (shimbun-asahi-html-content-end):
	Changed value.
	(shimbun-index-url): Removed.

2001-04-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-xmas-define-missing-widgets): New function.
	(TopLevel): Use it for defining some missing widgets after the
	library wid-edit is loaded.

	* w3m.el (w3m-track-mouse): Added a description about balloon-help.
	(w3m-make-balloon-help): New macro.
	(w3m-fontify-anchors, w3m-fontify-images): Use it.

2001-04-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/shimbun.el (shimbun-headers): Define as generic function.

	* shimbun/sb-wired.el (shimbun-get-group-header-alist): Don't return
	headers with duplicated message-id.

	* shimbun/sb-lump.el (shimbun-lump-check-p): Revert the checking logic.
	(shimbun-headers): Renamed from shimbun-get-headers.

2001-04-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-track-mouse): Default to t.
	(w3m-make-help-echo): New macro.
	(w3m-fontify-anchors, w3m-fontify-images): Use it.

2001-04-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-asahi-html.el: New file.

2001-04-12  Hideyuki SHIRAI  <shirai@meadowy.org>

	* mew-w3m.el (TopLevel): Set w3m-mode-map if not exec w3m-mode() yet.

2001-04-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-tcup.el (shimbun-get-headers): Don't decode buffer.

2001-04-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-fontify-images, w3m-fontify-anchors): Put a url
	string to each anchor as a `help-echo' property when the value of
	`w3m-track-mouse' is non-nil.
	(w3m-track-mouse): New user option.

2001-04-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-copy-buffer): Use `w3m-history-copy' to make copies
	of `w3m-history' and `w3m-history-flat'.

2001-04-10  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* mime-w3m.el (mime-w3m-mode-map): Refer `w3m-key-binding' to
	avoid the problem reported in [emacs-w3m:00498].

2001-04-10  Keisuke Nishida  <kxn30@po.cwru.edu>

	* w3m-search.el (w3m-search): Find default using thing-at-point.

2001-04-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-about-history): Use `w3m-history-flat' instead of
	`w3m-url-history'.
	(w3m-view-source): Don't bind `w3m-url-yrotsih' nor
	`w3m-url-history'.
	(w3m-redisplay-with-coding-system): Don't treat `w3m-url-history'.
	(w3m-reload-this-page): Ditto.
	(w3m-view-next-page): Use `w3m-history-forward' instead of
	`w3m-url-yrotsih'.
	(w3m-view-previous-page): Use `w3m-history-backward' instead of
	`w3m-url-history'.
	(w3m-exec): Use `w3m-history-push' instead of `w3m-url-yrotsih' or
	`w3m-url-history'.
	(w3m-toolbar): Use `w3m-history-next-link-available-p' and
	`w3m-history-previous-link-available-p'.
	(w3m-url-yrotsih, w3m-url-history): Removed.
	(TopLevel): Require `w3m-hist'.

2001-04-09  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-mhonarc.el (shimbun-make-contents): Fixed.

2001-04-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-info-like-map): Use `(shift iso-lefttab)' instead of
	`S-iso-lefttab'.
	(w3m-lynx-like-map): Ditto.

	* w3mhack.el (w3mhack-make-package): Add shimbun modules in
	MANIFEST.w3m file.
	(w3mhack-examine-modules): Look for the library "mime-def" instead
	of "mime" to check whether FLIM has been installed or not.
	* Makefile.in (install): Install shimbun modules as well.
	(install-icons): Show subdirectory name.

2001-04-09  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/shimbun.el (shimbun): Removed `headers' slot.
	(shimbun-retrieve-url-buffer): New function.
	(shimbun-open-group): Don't set up `headers' slot.
	(shimbun-close-group): Don't clean up `headers' slot.
	(shimbun-headers): Retrieve headers using
	`shimbun-retrieve-url-buffer'.

2001-04-09  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-key-binding): New user option.
	(w3m-lynx-like-map, w3m-info-like-map): New keymaps.
	(w3m): Refer w3m-key-binding, to decide whether keymap is used.

2001-04-06  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-ding.el: New file.

	* shimbun/sb-xemacs.el (shimbun-get-headers): Generate pattern
	from index-url.

	* shimbun/sb-mhonarc.el (shimbun-make-contents): Always insert
	Content-Type.

	* shimbun/sb-zdnet.el: Add `gemespot' support.

	* shimbun/sb-emacs-w3m.el: Removed.

2001-04-06  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/shimbun.el (shimbun-mua): Added slot `shimbun'.
	Define internal accessor.
	(shimbun-open): Setup shimbun slot.

2001-04-06  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-edit-current-url): New command.
	(w3m-mode-map): `w3m-edit-current-url' is registered.
	(w3m-save-this-url): Removed.
	(w3m-decode-encoded-buffer): Use `w3m-which-command' in order to
	find appropriate command in Windows.

2001-04-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-xemacs.el (shimbun-get-headers): Examine
	use-entire-index slot and use shimbun-search-id.
	(shimbun-xemacs-coding-system): Fixed redundant definition.

2001-04-05  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Makefile.in (default): Depends `Makefile'.
	(Makefile): Removed `--recheck' option in order to re-create
	itself when `Makefile.in' or `config.status' is updated.

2001-04-05  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (top): Define w3m-read-coding-system().
	(w3m-content-type-alist): Change "fiber" to "fiber.exe".
	(w3m-quit): Remove hook if no w3m exist.
	(w3m-arrived-add): Add 'coding-system entry.
	(w3m-arrived-coding-system): New function.
	(w3m-arrived-setup): Handle 'coding-system entry.
	(w3m-arrived-shutdown): Ditto.
	(w3m-goto-url): Handle specified coding-system.
	(w3m-redisplay-with-coding-system): Use w3m-read-coding-system.
	If no coding-system specify, set 'reset.

	* w3m-om.el (w3m-read-coding-system): New function.

2001-04-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/shimbun.el (shimbun-open-group): Reload header index.

	* shimbun/sb-namazu.el (shimbun-namazu-group-url-alist): New variable.
	(shimbun-index-url): Use it.
	(shimbun-get-headers): Set path argument of
	`shimbun-namazu-get-headers-1';
	Catch 'stop signal.
	(shimbun-namazu-get-headers-1): Added argument `path';
	Set relative path to xref;
	Throw 'stop and return headers if `shimbun-search-id' returns non-nil.

	* shimbun/sb-asahi.el (shimbun-asahi): Don't inherit shimbun.
	(shimbun-asahi-coding-system): Fixed redundant definition.

2001-04-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-tcup.el (shimbun-article): Changed argument `id' to
	`header'.

	* shimbun/shimbun.el (shimbun-article): Abolish argument `id'
	and added `header' instead.
	(shimbun): Removed `hash' slot.
	(shimbun-hash-length): Abolish.
	(shimbun-open-group): Don't set up hash slot.
	(shimbun-close-group): Don't clean up hash slot.
	(shimbun-header): Abolish.
	(shimbun-article-url): New inline function.

2001-04-04  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-namazu.el, shimbun/sb-emacs-w3m.el: New files.

2001-04-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/shimbun.el (shimbun-mua-use-entire-index): New method.
	(shimbun-attributes): Removed use-entire-index.
	(shimbun-open): Call `shimbun-mua-use-entire-index' to set
	use-entire-index slot.

	* shimbun/sb-airs.el (shimbun-airs-use-entire-index): Abolish.

	* shimbun/sb-bbdb-ml.el (shimbun-bbdb-ml-use-entire-index): Ditto.

	* shimbun/sb-fml.el (shimbun-get-headers): Stop when
	`shimbun-search-id' returns non-nil.

	* shimbun/shimbun.el (shimbun): Added `mua' slot.
	(shimbun-mua): New class.
	(shimbun-mua-search-id): New method.
	(shimbun-search-id): New function.
	(shimbun-mime-encode-string): Fixed problem when string is "" or nil.
	(shimbun-open): Added optional `MUA' argument.

	* shimbun/sb-mhonarc.el (shimbun-make-contents):
	Process content as text/html.

	* shimbun/shimbun.el (shimbun): Added `x-face-alist' slot.
	(shimbun-x-face-alist): Eliminated.
	(shimbun-x-face): New variable.
	(shimbun-attributes): Added `x-face-alist'.
	(shimbun-open): Set `x-face-alist'.
	(shimbun-open-group): Follow changes above.

	* shimbun/sb-text.el (shimbun-fill-column,
	shimbun-kinsoku-bol-list, shimbun-kinsoku-eol-list,
	shimbun-fill-line, shimbun-shallow-rendering): Moved from shimbun.el.

	* shimbun/sb-asahi.el (shimbun-asahi-x-face-alist): New variable.

	* shimbun/sb-zdnet.el (shimbun-zdnet-x-face-alist): Ditto.

	* shimbun/sb-wired.el (shimbun-wired-x-face-alist): Ditto.

	* shimbun/sb-cnet.el (shimbun-cnet-x-face-alist): Ditto.

2001-04-04  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-w3m-retrieve): Add 'cs(coding-system)' option.
	(w3m-retrieve): Ditto.
	(w3m-exec): Ditto.
	(w3m-goto-url): Ditto.
	(w3m-decode-buffer): Ditto. If 'cs' specify, decoding use it.
	(w3m-mode-map): Add w3m-redisplay-with-coding-system() at "C".
	(w3m-mode): Change doc string.
	(w3m-redisplay-with-coding-system): New function.

2001-04-04  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-w3m-attributes): When content type has trailing
	semicolon, make it removed.

	* shimbun/shimbun.el (TopLevel): Some redundant codes are removed.

	* w3mhack.el (load-path): Add `shimbun' sub-directory.

2001-04-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* Makefile.in (clean): Remove shimbun modules.

	* w3mhack.el (shimbun-module-directory): New constant.
	(w3mhack-examine-modules): Add shimbun modules if mime is installed.

	* w3m.el (w3m-decode-entities): New function.
	(w3m-fontify): Use it.

	* shimbun/shimbun.el (shimbun-decode-entities):
	Define as an alias for `w3m-decode-entities'.

2001-04-04  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-print-this-url): New optional argument
	`add-kill-ring' is added.

2001-04-03  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-filter.el: New file.

	* w3m-antenna.el (w3m-antenna-size): Refer decoded buffer as size.

	* w3m.el (TopLevel): Add autoload code of `w3m-filter'.
	(w3m-use-filter): New user option.
	(w3m-retrieve): Call `w3m-filter' when decode.

2001-04-03  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-airs.el, shimbun/sb-mew.el, shimbun/sb-wired.el,
	shimbun/sb-asahi.el, shimbun/sb-mhonarc.el, shimbun/sb-xemacs.el,
	shimbun/sb-bbdb-ml.el, shimbun/sb-netbsd.el, shimbun/sb-yomiuri.el,
	shimbun/sb-cnet.el, shimbun/sb-sponichi.el, shimbun/sb-zdnet.el,
	shimbun/sb-fml.el, shimbun/sb-tcup.el, shimbun/shimbun.el,
	shimbun/sb-lump.el, shimbun/sb-text.el: New files.

2001-04-03  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-force-redisplay): New variable, default is 't'.
	(w3m-toggle-inline-images): If w3m-force-redisplay is nil, don't
	redraw.
	(w3m-goto-url): Ditto.
	(w3m-region): Ditto.

	* mew-w3m.el (mew-mime-text/html-w3m): Bind w3m-force-redisplay to
	'nil'.
	(w3m-mew-support-cid): New variable.
	(mew-w3m-cid-retrieve): Use mew-syntax-get-entry-by-cid(),
	Tnx, Kazu Yamamoto <kazu@mew.org>.

2001-04-03  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-process-message): Removed.
	(w3m-exec-process): Clean up.
	(w3m-w3m-dump-head-source): Removed code which refers
	`w3m-process-message'.
	(w3m-w3m-dump-source): Ditto.
	(w3m-parse-attributes): Remove leading and trailing white space in
	CDATA attribute values.

2001-04-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-copy): Make a copy of `w3m-history-flat'
	using `w3m-history-flat' instead of `w3m-history-copy-1'.

2001-04-02  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Makefile.in (DISTS): Removed `Makefile'.

2001-04-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-backward, w3m-history-forward):
	Simplified.

2001-04-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-backward, w3m-history-forward): Allow
	the optional argument `count'.
	(w3m-history-backward-1, w3m-history-forward-1): New macros.

2001-04-02  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-0.2.1-mnc.patch: Apply patch posted in [w3m-dev 01887].

	* w3m.el (w3m-w3m-dump-head-source): Follow change in MNC patch.
	(w3m-w3m-attributes): Ditto.

2001-04-02  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-crlf-to-lf): New function.
	(w3m-w3m-dump-head-source): Do crlf-to-lf when executable-type eq
	'cygwin.
	(w3m-w3m-dump-source): All time do crlf-to-lf function when
	executable-type eq 'cygwin.

2001-04-02  Taiki SUGAWARA <taiki.s@cityfujisawa.ne.jp>

	* w3m.el (w3m-exec-process): Guard the process from some errors.
	(w3m-copy-buffer): Restore view point with new window to the point in
	original window.

2001-04-02  Hiroya Murata  <hiroya@use-ebisu.co.jp>

	* Makefile.in (Makefile): Depends on config.status instead of
	configure.
	(config.status): New rule.

2001-04-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* aclocal.m4 (AC_PATH_ICONDIR): Quote "$(data-directory)" in help-
	string.

2001-04-02  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-html-string-regexp): Make no exception of back-quote.
	(w3m-parse-attributes): Follow up above change.

2001-03-30  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-home-page): Default value is changed.
	(w3m-html-string-regexp): Support single quoted string.
	(w3m-parse-attributes): Import from w3m-form.el.
	(w3m-fontify-anchors): Fix bug reported in [emacs-w3m:00400].
	(w3m-external-view): Fix.
	(w3m-goto-url): Default argument is changed when it is
	interactively called.
	(w3m-browse-url): Fix.
	(w3m-about): Update.
	(w3m-about-history-except-regex): Add `about:'.

	* w3m-form.el: (w3m-parse-attributes): Exported.

	* mime-w3m.el (mime-w3m-save-background-color): Changed
	`edebug-form-spec'.

	* Makefile.in (dist): Improved.
	(Makefile, configure): New rules.
	(ECC, MODULES): Removed macros.

2001-03-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-with-elements): New macro.
	(w3m-history-rename-url): Use it.
	(w3m-history-remove-properties): Use it.
	(w3m-history-add-properties): Use it.
	(w3m-history-plist-put): Use it.

2001-03-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-rename-url): New function.
	(w3m-history-remove-properties): New function.
	(w3m-history-add-properties): New function.
	(w3m-history-plist-put): New function.
	(w3m-history-plist-get): New function.
	(w3m-history-assoc): Return a history element of `w3m-history-flat'
	instead of `w3m-history'.

2001-03-30  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-w3m-attributes): Fixed spec of return value when
	response code is greater than 500.

2001-03-29  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Fix bugs in caching deflated contents.
	(w3m-attributes): Fixed spec of return value when `about:' is
	specified.
	(w3m-cache-available-p): Removed.
	(w3m-w3m-dump-head-source): Reconstructed.
	(w3m-w3m-dump-source): New function.
	(w3m-w3m-retrieve): Use `w3m-w3m-dump-head-source' or `w3m-w3m-dump-source'.
	(w3m-real-url): Fix side effect of macro expansion.

	* w3m-0.2.1-mnc.patch: New file.

2001-03-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (default): Replace with `fast'.
	(install): Undo the last change.
	(.el.elc, .SUFFIXES, install-anyway): Removed.
	(fast-install-package, fast-install, fast): Removed.

	* w3m-hist.el (w3m-hist): Provide as a feature.
	(w3m-history-copy, w3m-history-copy-1): New functions.
	(w3m-history-push): Handle the variable `w3m-history-flat' as well
	as `w3m-history'.
	(w3m-history-assoc): Ditto.
	(w3m-history-flat function): Set the value of the variable
	`w3m-history-flat'.
	(w3m-history-flat variable): New buffer-local variable.
	(The whole module): Replace the term ATTRIBUTES with PROPERTIES;
	replace the symbol name of the variable `w3m-url-history' with
	`w3m-history'.

2001-03-29  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-real-url): Return original url when real url is nil.

	* w3m-antenna.el (w3m-antenna-sites): Add 'time' type.
	(w3m-antenna-alist): Modify comment.
	(w3m-antenna-hns-last-modified): Don't use old 'Last-Modified:'
	format.
	(w3m-antenna-last-modified): Use w3m-last-modified() when can not get
	'diary/di.cgi'.
	(w3m-antenna-check-sites): Push current-time() if (nth 6 pre) is nil.

2001-03-29  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Support deflated contents and redirected URLs.
	(w3m-decoder-alist, w3m-mnc): New variable.
	(w3m-encoding-alist): New constant.
	(w3m-attributes, w3m-w3m-attributes, w3m-local-attributes): Spec
	of return value is changed.
	(w3m-content-charset, w3m-content-encoding, w3m-real-url): New
	macro.
	(w3m-cache-available-p): New function.
	(w3m-decode-encoded-buffer): Ditto.
	(w3m-decode-buffer): Changed arguments spec.  Call
	`w3m-decode-encoded-buffer' to process encoded contents.
	(w3m-w3m-dump-head-source): New function.
	(w3m-w3m-retrieve): Call `w3m-w3m-dump-head-source' when `w3m-mnc'
	is non-nil value.  Follow change of `w3m-decode-buffer'.
	(w3m-exec): Call `w3m-real-url' to process redirected URLs.
	(w3m-sub-list): When N is nil, no elements in LIST should be
	deleted.
	(w3m-save-list): Preserve file permission when file is
	overwritten.

2001-03-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-compile): New function.

	* Makefile.in (fast-install-package, fast-install, fast): New rules.
	(install-package): Make it to be more talkative.
	(install-anyway): New rule separated from `install'.
	(install): Use `install-anyway'.

	* w3m-hist.el (w3m-history-push): Rewrite for following the change
	of `w3m-url-history'.
	(w3m-history-assoc): Ditto.
	(w3m-history-backward): Ditto.
	(w3m-history-forward): Ditto.
	(w3m-history-current): Ditto.
	(w3m-history-current-1): New macro.
	(w3m-history-next-link-available-p): New function.
	(w3m-history-previous-link-available-p): New function.
	(w3m-url-history): Make it to have the previous and the next
	position pointers.

2001-03-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-push): New function.

2001-03-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-url-history): Define it here.
	(w3m-history-assoc, w3m-history-flat, w3m-history-backward): New
	functions.

2001-03-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-forward): New function.

2001-03-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-goto-url): Put cursor at the top of minibuffer.

2001-03-23  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-w3m-attributes): Don't check "OK" string in Status-Line.

2001-03-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-time-parse-string the 2nd): Don't funcall
	`parse-time-string' directly for avoiding compile warning.

	* w3m-hist.el (w3m-history-current): New function.

2001-03-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el: New file.

2001-03-23  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-time-parse-string): Fix condition to detect
	timezone.el includes bug.

	* w3m-time.el: Removed.

	* w3m.el (TopLevel): Require `timezone' instead of `w3m-time'.
	(w3m-time-parse-string): Use `timezone-fix-time' and spec of
	return value is changed.
	(w3m-time-newer-p): Imported.

	* w3m-antenna.el (w3m-antenna-hns-last-modified): Follow change of
	`w3m-time-parse-string'.

2001-03-23  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* README, README.ja: Update for w3m-0.2.1.

	* Makefile.in (dist, tarball): Fix that some files are not
	included in package.

2001-03-22  Keisuke Nishida  <kxn30@po.cwru.edu>

	* w3m.el (w3m-goto-url): Insert the current url for input by default.

2001-03-22  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-xmas.el (w3m-update-toolbar): New function.
	(w3m-setup-toolbar): Added docstring.

	* w3m.el (w3m-goto-url): Call `w3m-update-toolbar'.
	(toplevel): Define `w3m-update-toolbar' if it is not bound as function.

2001-03-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-w3m-attributes): Ignore errors while parsing a
	time-string.

2001-03-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el: Moved generic macros and defsubsts in front of functions.
	(w3m-content-encoding, w3m-content-charset): Commented out.
	* w3m-form.el (w3m-parse-attributes): Moved from w3m.el.

2001-03-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el: Make `w3m-fontify-forms' and `w3m-form-parse-region' to
	be always autoloaded; encolose the defining procedures for the
	unbound functions with `eval-and-compile'.
	(browse-url-interactive-arg): Bind it only at the compile-time as
	an autoload'ed function.
	* w3m-xmas.el: Provide `w3m-xmas' and then require `w3m'.
	* w3m-om.el: Provide `w3m-om' and then require `w3m'.
	* w3m-form.el: Require `w3m'.
	* w3m-e21.el: Provide `w3m-e21' and then require `w3m'.

2001-03-22  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-antenna.el: All occurrence of `natsumikan' is replaced with
	`natsumican'.

2001-03-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (coding-system-category): Don't define it for the Emacs
	variants.
	* w3m-om.el (coding-system-category): Defalias to
	`get-code-mnemonic'.
	* w3m-xmas.el (coding-system-category): Defalias to
	`coding-system-type' if it is not bound.

	* w3mhack.el (w3mhack-version): Don't require `w3m' in the top
	level, do it here instead.

2001-03-22  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-save-list): Use 'pp' if have pp().
	Bind 'print-length' and 'print-level' to nil.

2001-03-22  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Structure of hash database of arrived urls is
	changed.
	(w3m-arrived-setup): Follow change of DB structure.
	(w3m-arrived-shutdown): Likewise.
	(w3m-arrived-add): Likewise, and argument spec is changed.
	(w3m-arrived-time): New function.
	(w3m-arrived-seq, w3m-arrived-put-title, w3m-arrived-arrived-time,
	w3m-arrived-put-arrived-time): Removed.
	(w3m-goto-url): Follow change of `w3m-arrived-add'.

2001-03-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-goto-url): Refresh the visibility of toolbar when
	XEmacs is running.

2001-03-22  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-url-to-file-name): Fix bug reported in
	[emacs-w3m:00305].
	(w3m-goto-url): Set the value interpreted as a directory to
	`default-directory'.

2001-03-21  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-about-db-history): Use w3m-arrived-arrived-time().
	(w3m-goto-url): Put arrived time to w3m-arrived-db.
	(w3m-arrived-shutdown): Handling 'arrived-time in w3m-arrived-db.
	(w3m-arrived-setup): Ditto.
	(w3m-arrived-put-title): New function.
	(w3m-arrived-arrived-time): Ditto.

2001-03-21  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-arrived-shutdown): Check sites which are arrived on
	the other emacs process.

2001-03-21  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-input-url): 'nil' don't add candidates.

2001-03-21  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-antenna.el (w3m-antenna-make-summary-function): Default
	value is changed.
	(w3m-antenna-make-summary-like-natsumikan): New function.

	* w3m.el (w3m-about-db-history-sort-time): Removed.
	(w3m-about-db-history): Use `w3m-time-newer-p' instead of
	`w3m-about-db-history-sort-time'.

2001-03-20  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-about-history-except-regex): New constant.
	(w3m-about-db-history): New function.
	(w3m-about-db-history-sort-time): Ditto.
	(w3m-about-history): If 'titile' is '<no-title>', show 'URL' instead
	of 'title'. Use w3m-about-history-except-regex.
	(w3m-history): If exec with 'C-u', goto 'about://db-history/'.
	(w3m-w3m-attributes): Adhoc implementation when server return
	'HTTP/1.x 500x'.

2001-03-19  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Format of arrived URL database is changed in order to
	store page's title.
	(w3m-arrived-title, w3m-arrived-put-title): New function.
	(w3m-arrived-setup, w3m-arrived-shutdown): Follow format change.
	(w3m-about-history): Use page's title to make history contents.

2001-03-19  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-url-to-file-name): Fix 'file:///c/xxxx' format in
	Windows.
	(w3m-expand-file-name-as-url): Use 'file:///c|/xxxx' format if
	non-cygwin Windows.
	(w3m-about-history): Uniq history. Insert exposition of html.

2001-03-19  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-url-to-file-name): Fix (Cf. RFC-1808).
	(w3m-expand-file-name-as-url): Ditto.
	(w3m-url-local-p): New function.
	(w3m-goto-url): Set `default-directory' when URL points a local
	file.
	(w3m-find-file): Use `w3m-goto-url'.
	(w3m-w32-browser-with-fiber): Use `w3m-url-to-file-name'.

2001-03-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-make-package): Fixed entries of autoloads and
	cus-load, and added ChangeLog in the file MANIFEST.w3m.

	* aclocal.m4 (AC_CHECK_EMACS): Added the option `--with-xemacs'.

2001-03-19  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-download): Bind `file-coding-system' to binary.
	(w3m-content-type-alist): Fix.

2001-03-18  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-antenna.el (w3m-antenna): Optional argument, `no-cache' is
	added.

2001-03-18  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-goto-url): Switch to buffer of w3m, certainty.
	(w3m): Ditto.

2001-03-17  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-halfdump-command-arguments): Rename from
	'w3m-command-arguments'.
	(w3m-command-arguments): New customize variable.
	(w3m-exec-process): Add w3m-command-arguments to args when w3m
	execute.
	(w3m-rendering-region): Use w3m-halfdump-command-arguments when w3m
	execute.
	(w3m-fontify-anchors): Put w3m-name-anchor certainty.

2001-03-17  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-antenna.el: Changed antenna database format.
	(w3m-antenna-site-key, w3m-antenna-site-title,
	w3m-antenna-site-class, w3m-antenna-site-url,
	w3m-antenna-site-last-modified, w3m-antenna-site-size,
	w3m-antenna-site-size-detected): New macros.
	(w3m-antenna-setup): Follow change of database format.
	(w3m-antenna-check-sites): New function.
	(w3m-antenna-make-summary, w3m-antenna-sort-sites-by-time,
	w3m-antenna-sort-sites-by-title): Use macros to refer database.
	(w3m-about-antenna): Use w3m-antenna-check-sites.

	* w3m.el (w3m-about-history): Don't print "about://antenna/".

2001-03-17  Yuuichi Teranishi  <teranisi@gohome.org>

	* icons/antenna-up.xpm: New file.

	* w3m.el (w3m-toolbar-buttons): Added "antenna".
	(w3m-toolbar): Ditto;
	Fixed behavior of `home'.

2001-03-16  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el, w3m-antenna.el: Fix typo.

2001-03-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-make-package): Remove autoloads and cus-load
	files before generating.

	* w3m.el (w3m): Added autoload cookie.
	(w3m-icon-directory): Attempt to set the default value using the
	way of Wanderlust.

2001-03-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* README: Update for `install-package' and `install-icons'.
	* README.ja: Ditto.

	* w3mhack.el (w3mhack-make-package): New function.
	(w3mhack-examine-modules): Ignore auto-save files.

	* mkinstalldirs: New file.

	* configure.in: Call `AC_PATH_PACKAGEDIR'.

	* aclocal.m4 (AC_PATH_PACKAGEDIR): New function.
	(AC_EXAMINE_PACKAGEDIR): New function.
	(AC_CHECK_EMACS_FLAVOR): Merged into `AC_CHECK_EMACS'.

	* Makefile.in (install-package): New rule.
	(install-icons, install): Exec mkinstalldirs.
	(SHELL, PACKAGEDIR): New variable.

2001-03-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-goto-url): Force switch to '*w3m*' buffer.
	(w3m-view-source): Don't add current-url to w3m-url-history|yrotsih.

	* mew-w3m.el (mew-w3m-cid-retrieve): Change mime-part handling.

2001-03-16  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-antenna.el (w3m-antenna-sort-function): Removed.
	(w3m-antenna-sort-changed-sites-function): New variable.
	(w3m-antenna-sort-unchanged-sites-function): Ditto.
	(w3m-antenna-sort-sites-by-time): Refer time, when size
	modification detected.
	(w3m-about-antenna): Use new variables.

2001-03-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-time.el (w3m-time-rules): Don't use backquote.
	(w3m-time-zoneinfo): Ditto.
	(w3m-time-parse-integer): Ditto.

2001-03-16  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (TopLevel): Require `w3m-time'.
	(w3m-w3m-attributes): Use `w3m-time-parse-string' instead of
	`parse-time-string'.

	* w3m-time.el: Import parse-time.el of T-gnus and rename it.

	* w3m-antenna.el: Use `w3m-time-parse-string' instead of
	`parse-time-string'.

2001-03-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-e21.el (w3m-create-image): Changed arguments spec,
	that `accept-type-regexp' is removed.

	* w3m-xmas.el (w3m-create-image): Ditto.

2001-03-16  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Arrived URL database format is changed and code to get
	headers and to retrieve contents is cleaned up.
	(w3m-attributes, w3m-local-attributes): New function.
	(w3m-w3m-attributes): Old name is `w3m-w3m-check-header'.
	(w3m-content-type): Use `w3m-attributes'.
	(w3m-content-charset, w3m-content-length, w3m-content-encoding,
	w3m-last-modified): New macro.
	(w3m-retrieve, w3m-local-retrieve): Changed arguments spec, that
	`accept-type-regexp' is removed.
	(w3m-w3m-retrieve): Likewise and call `w3m-w3m-attributes' instead
	of `w3m-w3m-check-header'.
	(w3m-exec): Follow change of arguments spec of `w3m-retrieve'.
	(w3m-about-source, w3m-about-header): Changed arguments spec that
	`accept-type-regexp' is removed and follow change of arguments
	spec of w3m-retrieve.
	(w3m-arrived-last-modified): New function.
	(w3m-arrived-add): Support optional argument `time' and follow
	change of database format.
	(w3m-arrived-setup, w3m-arrived-shutdown,
	w3m-arrived-store-position, w3m-arrived-restore-position): Follow
	change of database format.
	(w3m-with-work-buffer, w3m-parse-attributes): Changed
	`edebug-form-spec', see [emacs-w3m:00238].
	(TopLevel): Add autoload codes for `w3m-antenna.el'.

	* w3m-antenna.el: New file.

	* mime-w3m.el (mime-w3m-cid-retrieve): Changed arguments spec,
	that `accept-type-regexp' is removed.

	* mew-w3m.el (mew-w3m-cid-retrieve): Ditto.

2001-03-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (install-icons): New rule.
	(ICONDIR): New variable.

	* aclocal.m4 (AC_PATH_ICONDIR): New function.
	* configure.in: Call it.

2001-03-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* icons: New directory (Some toolbar icons are contained).

2001-03-16  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-view-source): Render as html if already display source.

2001-03-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-icon-directory): New variable.
	(w3m-toolbar-buttons): New constant.
	(w3m-toolbar): Ditto.
	(w3m-setup-toolbar): Define as null function.
	(w3m-mode): Call `w3m-setup-toolbar'.

	* w3m-xmas.el (w3m-use-toolbar): New variable.
	(w3m-xmas-make-toolbar-buttons): New function.
	(w3m-setup-toolbar): Ditto.

	* w3m-e21.el (w3m-use-toolbar): New variable.
	(w3m-e21-toolbar-configurations): Ditto.
	(w3m-e21-setup-toolbar): New function.
	(w3m-e21-make-toolbar-buttons): Ditto.
	(w3m-setup-toolbar): Ditto.

2001-03-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (XEmacs): Implemented the source level optimizer for
	`let' or `let*' form to remove some obsolete variables.

2001-03-15  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* README, README.ja: Update procedure of package installation.

	* w3m.el (w3m-hook): Removed.
	(w3m-goto-mailto-url): Old name is `w3m-mailto-url'.
	(w3m-goto-ftp-url): Old name is `w3m-exec-ftp'.
	(w3m-convert-ftp-url-for-emacsen): Old name is
	`w3m-convert-ftp-to-emacsen'.
	(w3m-exec): Removed code for ftp protocol.
	(w3m-alive-p): Change spec of return value when w3m is alive.
	(w3m-goto-url): Made this function safe when it is called at the
	buffer whose major mode is not equal to w3m-mode.
	(w3m): If it is interactively called when w3m is alive, it is
	simply select the appropriate buffer in the current window without
	asking url.
	(w3m-view-parent-page, w3m-browse-url, w3m-view-source,
	w3m-history): Use `w3m-goto-url' instead of `w3m'.
	(w3m-mode-map): Replace `w3m' with `w3m-goto-url'.

2001-03-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (MULE): Make `locate-library' run quietly; bind
	defcustom'ed variables at compile-time; require `w3m' after
	byte-optimizations are done.

	* w3m.el (w3m-static-cond): New macro; use it for defining
	`find-coding-system'.
	(w3m-url-encode-string): Use `append' instead of `string-to-list'
	to coerce a string to a list of chars.
	(w3m-entity-regexp): Don't funcall `regexp-opt' directly for
	avoiding compile warning.

2001-03-15  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-exec-process): Add `delete-process' to clean up
	resources of child process.

2001-03-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (default): Report errors if it has occurred while
	examining modules.

	* w3m.el: Add autoload for `w3m-remove-image' when compiling.
	(w3m-charset-coding-system-alist): Use `coding-system-p' if the
	function `find-coding-system' is not bound.

	* w3mhack.el: Use `require' instead of `load' for loading "w3m" to
	avoid undesirable newlines in stdout.

2001-03-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el: Require `wid-edit' when the widget `coding-system'
	is not available.

	* mime-w3m.el: Add autoload for `font-set-face-background' since it
	is not auto-autoload'ed in XEmacs.

	* w3mhack.el: Require `bytecomp'; make XEmacs don't warn for unused
	non-global variables.

2001-03-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el: Bind colon keywords only if it is not available.
	(rfc2368-parse-mailto-url):
	(w3m-form-parse-region):
	(w3m-fontify-forms): Bind them only at the compile-time as
	autoload'ed functions to avoid byte-compile warnings.

	* w3mhack.el: Byte optimize `truncate-string' for replacing with
	`truncate-string-to-width' if it is bound.

	* mew-w3m.el (mew-w3m-minor-mode-setter): Defun it after defining
	some variables.

2001-03-15  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Makefile.in (default): Add `-k' option to continue byte-compile
	as much as possible after an error.

2001-03-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (default): Don't use `for' loop.
	* w3mhack.el (w3mhack-examine-modules): Use space instead of
	newline for the module names separator.

2001-03-14  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Removed functions and variables of bookmark.
	* w3m-bookmark.el: New file.
	* Makefile.in: Clean up rules and removed GNU-make depended
	functions.
	* w3mhack.el (TopLevel): Load w3m.el.
	(w3mhack-version): New function.
	* .cvsignore: Add files generated by autoconf.

2001-03-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-examine-modules): Renamed from
	`w3mhack-examine-additional-modules'.
	* Makefile.in: Ditto.

2001-03-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in, aclocal.m4, configure.in, install-sh, w3mhack.el:
	New files.
	* Makefile: Removed.

2001-03-14  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Split file.

	* w3m-form.el: New file.

2001-03-14  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-xmas.el (w3m-insert-image): Don't use current cursor point
	to make a new extent.

	* w3m.el (w3m-region): Call `sit-for' to redisplay before image
	display.
	(w3m-goto-url): Ditto.
	(w3m-exec-process): Use `sleep-for' instead of `sit-for'.
	(w3m-toggle-inline-images): Set cursor point before image insertion.
	(w3m-goto-url): Set cursor point before redisplay.

2001-03-14  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-read-passwd): Removed.
	(w3m-exec-filter): Use `read-passwd' instead of `w3m-read-passwd'.

	* w3m-om.el (read-passwd): Added.

2001-03-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-om.el: Rewrite to insert "-" into the name of eol-type
	variants of each newly generated coding-system.

2001-03-14  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Split files.
	(w3m-coding-system): Changed customize type.
	(w3m-input-coding-system): Ditto.
	(w3m-output-coding-system): Ditto.
	(w3m-bookmark-file-coding-system): Ditto.
	(w3m-url-encode-string): Removed redundant code for Mule-2.

	* w3m-e21.el: New file.

	* w3m-xmas.el: New file.

	* w3m-om.el: New file.

	* w3m-search.el (w3m-search-default-coding-system): Changed
	customize type.
	(w3m-search-engine-alist): Ditto.

	* w3m-weather.el: Fix comments.

2001-03-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el: Use the copy of info-vector for newly generated coding-
	systems; use `eval-when-compile' separately from "cl" for loading
	"cl-macs".

2001-03-13  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Split files.
	* w3m-search.el: New file.
	* w3m-weather.el: New file.

2001-03-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-rendering-region): Make no exceptions of Mule 2 in
	coding-systems.
	(w3m-download): Ditto.
	(w3m-local-retrieve): Ditto.
	(w3m-exec-process): Ditto.
	(w3m-arrived-file-coding-system): Unified the default value to
	`euc-japan'.
	(w3m-bookmark-file-coding-system): Ditto.
	(w3m-default-url-coding-system): Ditto.
	(w3m-output-coding-system): Ditto.
	(w3m-coding-system): Ditto.
	(w3m-input-coding-system): Unified the default value to
	`iso-2022-jp'.
	(TopLevel): Generate some coding-systems by copying for Mule 2.
	(TopLevel): Load "cl-macs" if the macro `dolist' has been defined
	incorrectly.

2001-03-13  Masatake YAMATO  <jet@gyve.org>

	* w3m.el (w3m-url-yrotsih): New variable.
	(w3m-view-previous-page): Set w3m-url-yrotsih.
	Use while/cdr instead of nthcdr.
	(w3m-view-next-page): New function.
	(w3m-mode-map): Bind w3m-view-next-page.
	(w3m-mode): Added w3m-view-next-page and w3m-view-parent-page
	to the function document.
	(w3m-reload-this-page): Guard w3m-url-yrotsih from resetting.
	(w3m-exec): Reset yrotsih.

2001-03-13  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-content-type-alist): [UNIX] Change method for
	text/html type.

2001-03-13  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>,
	    TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Require `poem' when Mule 2.3 is running.  Bind keywods
	`:case-ignore' and `:integer' for Mule 2.3.
	(coding-system-category): New alias when Mule 2.3 is running.
	(w3m-arrived-file-coding-system): Fix typo.
	(w3m-entity-alist): Fix for Mule 2.3.
	(w3m-form-method, w3m-form-action, w3m-form-plist, w3m-form-put,
	w3m-form-get): Convert to old style of macro definition.
	(w3m-fontify): Removed code to decode w3m-specific characters.
	(w3m-decode-extended-characters): New function.
	(w3m-rendering-region): Use an unibyte temporary buffer and call
	`w3m-decode-extended-characters'.

2001-03-13  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-exec-process): Return process exit status.
	(w3m-w3m-get-header): Check the return value of w3m-exec-process.
	(w3m-w3m-check-header): Check the return value of w3m-w3m-get-header.

2001-03-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-exec-process): Check exit status and cause an error
	if it is not zero.

2001-03-12  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-executable-type): Use (eq system-type 'windows-nt)
	for determination of win32.
	(w3m-content-type-alist): Ditto.

2001-03-12  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-which-command): Support executable suffix, `.exe'
	for win32.

2001-03-12  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-content-type-alist): Add 'use fiber.exe' alist for Windows.
	(w3m-w32-browser-with-fiber): New funciton.

2001-03-12  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-which-command): New function.
	(w3m-external-view): When no viewing method is defined, call
	`w3m-download' as alternative method.  Added check which command
	exists with `w3m-which-command'.

2001-03-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-display-inline-image-status): Define as buffer local
	variable.
	(w3m-image-type): New function.
	(w3m-image-type-available-p): Ditto.
	(w3m-create-image): Check image type by `w3m-image-type-available-p'.
	(w3m-exec): Accept all content-types in `w3m-retrieve';
	Make an image only page, if the image can be displayed inline;
	Call `w3m-external-view' if the content-type of retrieved content
	is not text nor image.

2001-03-12  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-view-parent-page): Add a postfix '/' to parent-url.

2001-03-12  Takaaki MORIYAMA  <taka@airlab.cs.ritsumei.ac.jp>

	* w3m.el (w3m-extended-charcters-table): Add '\x80'.

2001-03-12  Masatake YAMATO  <masata-y@is.aist-nara.ac.jp>

	* w3m.el (w3m-view-parent-page): New command.
	(w3m-mode-map): Add `w3m-view-parent-page'.

2001-03-10  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* mime-w3m.el (mime-w3m-message-structure): Make variable buffer
	local at top leve.

2001-03-10  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-entity-alist): Eval at compile time.;
	Add character entity references for ISO 8859-1 characters.

2001-03-09  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-entity-regexp): New constant.
	(w3m-fontify): Use `w3m-entity-regexp'.
	(w3m-entity-value): Use defsubst, and fix typo.
	(w3m-decode-anchor-string): New function.
	(w3m-fontify-anchors): Decode `&amp;' exists in URL string.

2001-03-09  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-create-image) [EMACS21,XEMACS]: Guard against error.

	* mew-w3m.el (mew-w3m-auto-insert-image): New variable.
	(mew-mime-text/html-w3m): Bind 'w3m-display-inline-image' with
	'mew-w3m-auto-insert-image'.
	(mew-w3m-cid-retrieve): New function. Fix wrong guess.

2001-03-09  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-mode-map): Add `w3m-close-window',
	`w3m-view-source', `w3m-view-header', and `w3m-history'.  Keybind
	of `w3m-quit' is changed.
	(w3m-close-window, w3m-about-source, w3m-view-source,
	w3m-about-header, w3m-view-header, w3m-about-history,
	w3m-history): New functions.

	* mime-w3m.el (mime-put-keymap-region): Removed.
	(mime-w3m-save-background-color): Old name is
	`mime-save-background-color'.
	(mime-w3m-mode-map): Add workaround for `w3m-close-window',
	`w3m-view-source', `w3m-view-header', and `w3m-history'.

2001-03-09  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-cid-retrieve-function-alist): New variable.
	(w3m-retrieve): Add support for URLs which has `cid:' prefix.

	* mime-w3m.el: Always require `w3m'.
	Require `cl' when compiling.
	Set `w3m-cid-retrieve-function-alist'.
	(mime-w3m-message-structure): New variable.
	(mime-w3m-preview-text/html): Set `mime-w3m-message-structure'.
	(mime-w3m-cid-retrieve): New function.

2001-03-09  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-toggle-inline-images): Eliminated needless local
	variable.
	(toplevel): Encloses old emacs judgement with eval-and-compile;
	Define `find-coding-system' using `w3m-static-if'.

2001-03-08  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: All w3m-backlog-* symbols are renamed into w3m-cache-*,
	and coupling of retrieve module and cache module are cleand up.
	(w3m-keep-cache-size): Old name is `w3m-keep-backlog'.
	(w3m-cache-buffer, w3m-cache-articles, w3m-cache-hashtb,
	w3m-cache-setup, w3m-cache-shutdown, w3m-cache-contents,
	w3m-cache-request-contents): These symbols are renamed.
	(w3m-cache-header, w3m-cache-request-header): New function.
	(w3m-work-buffer-list): New variable.
	(w3m-get-buffer-create): New function.
	(w3m-with-work-buffer): New macro.
	(w3m-kill-all-buffer): New function.
	(w3m-create-image, w3m-local-retrieve): Use `w3m-with-work-buffer'
	instead of `with-current-buffer'.
	(w3m-arrived-setup): Set `w3m-input-url-history' when its value is
	nil.
	(w3m-arrived-shutdown): More strict error check.  This function is
	added to `kill-emacs-hook'.
	(w3m-w3m-get-header): New function.
	(w3m-w3m-check-header): Use `w3m-w3m-get-header'.
	(w3m-w3m-retrieve): Clean up code.
	(w3m-download, w3m-exec): More strict error check.
	(w3m-content-type): New optional argument `no-cache' is added.
	(w3m-alive-p): New function.
	(w3m-quit): Use `w3m-alive-p'.

2001-03-08  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-local-retrieve): Bind 'auto conversion variables' to
	nil when insert file with binary .

2001-03-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-insert-image): Eliminated needless local variable.
	(w3m-remove-image) [XEmacs]: Remove images at `end' too.
	(w3m-fontify-images): Set `w3m-image-redundant' property
	if "img_alt" string is upper case.
	(w3m-toggle-inline-images): Fixed docstring;
	Insert and remove dummy string if alt string has `w3m-image-redundant'
	property.

2001-03-08  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-fontify): Allow '_' char for element name.

2001-03-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-display-inline-image-status): New variable.
	(w3m-image-type-alist): Define as constant.
	(w3m-anchor): Moved position.
	(w3m-image): Ditto.
	(w3m-action): Ditto.
	(w3m-create-image): Added argument `no-cache'.
	(w3m-remove-image): New function.
	(w3m-fontify-images): Don't display inline image here.
	(w3m-toggle-inline-images): New function.
	(w3m-mode-map): Bind 't' to `w3m-toggle-inline-images'.
	(w3m-goto-url): Call `w3m-toggle-inline-images';
	Set `w3m-display-inline-image-status'.
	(w3m-region): Ditto.

2001-03-08  Akihiro Arisawa  <ari@mbf.sphere.ne.jp>

	* mime-w3m.el (mime-w3m-preview-text/html): Use
	`mime-entity-fetch-field' instead of `mime-w3m-get-xref'.
	(mime-w3m-get-xref): Removed.

2001-03-07  Keisuke Nishida  <kxn30@po.cwru.edu>

	* w3m.el (w3m-search-engine-alist): Added "rpmfind".
	(w3m-fontify-anchors): Treat single quotes (') as quotation marks.

2001-03-08  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Backlog module is separated from front-end functions and
	code to access the list of arrived URLs is put in order.
	(w3m-arrived-file): Renamed from `w3m-arrived-urls-file'.
	(w3m-arrived-anchor-list): Removed variable.
	(w3m-arrived-list-load, w3m-arrived-list-save,
	w3m-arrived-list-add, w3m-save-position, w3m-restore-position):
	Removed functions.
	(w3m-arrived-db-size): New constant.
	(w3m-arrived-db, w3m-arrived-seq): New variables.
	(w3m-arrived-p, w3m-arrived-add, w3m-arrived-setup,
	w3m-arrived-shutdown, w3m-arrived-store-position,
	w3m-arrived-restore-position): New functions.
	(w3m-input-url): Follow changes.
	(w3m-view-previous-page): Ditto.
	(w3m-view-previous-point): Ditto.
	(w3m-quit): Ditto.
	(w3m-goto-url): Ditto.
	(w3m-create-image): Clean up codes.

2001-03-07  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-view-current-url-with-external-browser): Fix typo when
	browse current URL.

2001-03-07  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-create-image) [XEmacs]: Retrieve header to determine
	image type when `w3m-local-content-type' failed.

2001-03-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-arrived-file-coding-system): Default value is
	changed to avoid unknown coding system error on XEmacs.
	(w3m-input-url): Changed for old style `completing-read'.

2001-03-07  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-download): Bind 'auto conversion variables' to nil.
	(w3m-w3m-check-header): Fix search 'HTTP/1.[01] 200' method.
	(inline-image-features): Patch from Yuuichi Teranishi san
	<teranisi@gohome.org> at [emacs-w3m:00103].

2001-03-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* mime-w3m.el: Renamed mime-w3m-preview-text/html from
	w3m-mime-preview-text/html.  Check of user setting is required.
	(mime-w3m-mode-map): New variable.
	(mime-w3m-get-xref): New function.
	(mime-w3m-view-this-url): Ditto.
	(mime-w3m-mouse-view-this-url): Ditto.
	(mime-w3m-preview-text/html): Use `mime-w3m-mode-map' insted of
	`w3m-mode-map'.  Refer Xref: header to set `w3m-current-url'.
	(mime-put-keymap-region): Define with `defmacro' instead of `defmacro-maybe'.
	(mime-save-background-color): Ditto.

	* w3m.el (w3m-exec-filter): Improved code to process prompt string.

2001-03-06  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-exec-filter): Delete Prompt string with process output
	buffer.
	(w3m-w3m-check-header): Check 'HTTP/1.[01] 200' for valid
	'content-length'.
	(w3m-w3m-retrieve): Cygwin binary data support. Remove Prompt
	handling.

2001-03-06  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (emacs-w3m-version): New constant.
	(find-coding-system): Removed duplicated definition.
	(w3m-backlog-remove-oldest): Simplify.
	(w3m-search): Fix typo in function document.

2001-03-05  Keisuke Nishida  <kxn30@po.cwru.edu>

	* w3m.el (w3m-anchor, w3m-image, w3m-action): Use defsubst.

2001-03-05  Keisuke Nishida  <kxn30@po.cwru.edu>

	* w3m.el (and-let*): Removed
	(w3m-save-this-url): Updated.

2001-03-06  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-goto-previous-anchor): Fix mistake on merging
	w3-anchor patch. Cursor should go to beginning of anchor previous.
	(w3m-mode-map): Assign Shift-TAB key with w3m-previous-anchor.

2001-03-06  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (TOP): No need to load cl-macs explicitly.
	(w3m-charset-coding-system-alist): Do not use doloop in defcustom
	because it is not expanded in compile time.

2001-03-05  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el: apply patch from Keisuke Nishida.
	URL is hold in text property as already expanded.
	Some utility functions (w3m-anchor, w3m-image, w3m-action) is
	defined and used.
	(and-let*): New macro.
	(w3m-fontify-anchors): Hold expanded url in text property.
	(w3m-fontify-images): Likewise.
	(w3m-expand-url): Save matching data.
	Match pattern bug fix (by gotoh).
	(w3m-anchor): New function.
	(w3m-image): New function.
	(w3m-action): New function. (added by gotoh)
	(w3m-view-this-url): Use new functions to extract text prop.
	(w3m-mouse-view-this-url): Likewise.
	(w3m-download-this-url): Likewise.
	(w3m-print-this-url): Likewise.
	(w3m-save-this-url): Likewise.
	(w3m-goto-next-anchor): Likewise, and do not expand url.
	(w3m-external-view): Remove 1st arg CONTENT-TYPE.
	(w3m-next-anchor): Use and-let* macro and do not expand url.
	(w3m-goto-previous-anchor): Use utility functions.
	(w3m-bookmark-add-this-url): Likewise and refine.
	(w3m-url-encode-string): Do not escape ':' and '/'.

2001-03-05  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-retrieve): Add support for URLs which has `about:'
	prefix.
	(w3m-content-type): Likewise.
	(w3m-about, w3m-about-weather, w3m-weather,
	w3m-weather-remove-headers, w3m-weather-remove-footers,
	w3m-weather-remove-weather-images,
	w3m-weather-remove-washing-images,
	w3m-weather-remove-futon-images,
	w3m-weather-remove-week-weather-images, w3m-weather-insert-title):
	New function.
	(w3m-weather-url-alist): New associative list of AREA vs. URL.
	(w3m-weather-default-area): New customize variable.
	(w3m-weather-default-area): Ditto.
	(w3m-entity-value): When unknown entity is specified, return
	original string instead of null string.

2001-03-05  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-url-encode-string): New function.
	(w3m-escape-query-string): Use `w3m-url-encode-string'.
	(w3m-form-make-get-string): Ditto.
	(w3m-message): Changed to support Emacs-19.
	(w3m-parse-attributes): Ditto.
	(w3m-fontify): Refer `mc-flag' when mule is used.

2001-03-05  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-command-arguments): Make it as system constants user
	not for user variable. User need not change this value.  "-S"
	options is removed because it doesn't work for non Text/Plain
	object.
	(w3m-default-url-coding-system): New variable.
	(w3m-search-engine-alist): Change format to hold encoding type
	for query string. And add some engines.
	(w3m-fill-column): Born again variable. Positive value is for
	fixed column, negative value is for fitting frame width.
	(w3m-mode): Add key description of "<" and ">" in doc-string.
	(w3m-escape-query-string): Add 2nd argument for coding system.
	(w3m-search): Adapt to new format of w3m-search-engine-alist.

2001-03-05  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-sub-list): Guard error for XEmacs (N must count from
	zero).

2001-03-05  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-search): Simplify.
	(w3m-do-search): Removed.

2001-03-05  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Merge form branch to main trunk.

2001-03-05  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-form-new): Changed w3m-form structure.
	(w3m-form-p): Likewise.
	(w3m-form-put): Likewise.
	(w3m-form-get): Likewise.
	(w3m-form-plist): New macro.
	(w3m-form-symbol): Removed.
	(w3m-url-encode): Ditto.
	(w3m-form-make-get-string): Follow change of w3m-form and use
	w3m-escape-query-string instead of w3m-url-encode.
	(w3m-parse-attributes): New macro.
	(w3m-form-parse-region): Use w3m-parse-attributes.
	(w3m-fontify-forms): Use w3m-parse-attributes.

2001-03-05  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-content-type-alist): Add some content-type.
	(w3m-w3m-retrieve): Change bind variables method to 'let*'.

2001-03-05  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-command-arguments): Add "-S" option for w3m.
	(w3m-search-engine-alist): Add new spec for google with JA lang.
	(w3m-current-url): Make variable buffer local at top leve.
	(w3m-current-title): Likewise.
	(w3m-url-history): Likewise.
	(w3m-process-temp-file): Likewise.
	(w3m-rendering-region): Do not make local variable for the reason
	above.
	(w3m-exec): Likewise.
	(w3m-external-view): Likewise.
	(w3m-goto-next-anchor): Bug fix.
	(w3m-goto-previous-anchor): Bug fix.
	(w3m-escape-query-string): Bug: Escape SPC char as "+" not "%20".

2001-03-04  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-form-string-regexp): Add `eval-and-compile' to
	suprress byte-compile error.
	(w3m-form-p): Fix typo.
	(w3m-mode-map): Swapped keybindings of w3m-scroll-left and
	w3m-scroll-right to fit w3m's keybindings.

2001-03-04  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el: Add Keisuke Nishida as author.
	(TOP): Use thingatpt instead of ffap.
	(w3m-fill-column): Obsoleted. Determine in dynamic.
	(w3m-command-arguments): Specify as lambda
	(w3m-command-arguments): Change initial value.
	(w3m-search-engine-alist): Change spec more simple.
	(w3m-input-url): Use thing-at-point.
	(w3m-do-search): Adapt to new w3m-search-engine-alist spec.
	(w3m-search): Change variable name and refine codes.

	* w3m.el: (w3m-entity-value): Allow immediate entity (&#nnn).
	(w3m-fontify): Likewise.

2001-03-04  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-delete-duplicated-empty-lines): New variable.
	(w3m-search-engine-alist): New variable.
	(w3m-default-search-engine): New variable.
	(w3m-horizontal-scroll-columns): New variable.
	(w3m-fontify): Change regexp to allow non-double-quoted string for
	href attribute value of anchor tag. Remove duplicated empty lines
	for compact view.
	(w3m-mode-map): Add keymap "<" and ">" to scroll horizontaly.
	(w3m-mode): Truncate lines.
	(w3m-scroll-left): New interactive function.
	(w3m-scroll-right): New interactive function.
	(w3m-escape-query-string): New function.
	(w3m-do-search): New function.
	(w3m-search): New interactive function for searching word with
	various search engine.

2001-03-04  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Start implementation of code to process <form> tag.
	(w3m-form-face): New face.
	(w3m-current-forms): New internal variable.
	(w3m-form-string-regexp): New internal constant.
	(w3m-form-new, w3m-form-p, w3m-form-symbol, w3m-form-method,
	w3m-form-action, w3m-form-put, w3m-form-get, w3m-url-encode,
	w3m-form-make-get-string, w3m-form-parse-region,
	w3m-fontify-forms, w3m-form-replace, w3m-form-input,
	w3m-form-submit, w3m-form-real-reset, w3m-form-reset,
	w3m-fontify-bold, w3m-fontify-underline, w3m-fontify-images):
	New function.
	(w3m-fontify): Use new functions.
	(w3m-mode-map): Add scroll-right and scroll-left.
	(w3m-mode): Set t to `truncate-line'.

2001-03-04  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el: Patch from Keisuke Nishida <kxn30@po.cwru.edu>.
	(w3m-print-this-url): Do not save URL, print only.
	(w3m-save-this-url): New function. Print and save URL under cursor.
	(w3m-goto-next-anchor): New function.
	(w3m-next-anchor): Move to top anchor from bottom.
	Print URL after move.
	(w3m-goto-previous-anchor): New function.
	(w3m-previous-anchor): Move to bottom anchor from top.
	Print URL after move.

2001-03-04  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el: Patch from Keisuke Nishida <kxn30@po.cwru.edu>.
	(TOP): Require ffap.el.
	(w3m-input-url): Prompt with default URL, and use URL under cursor
	as default if not specified.
	(w3m): Do not specify default url for w3m-input-url.

2001-03-02  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-backlog-enter): Overwrite backlog data when
	specified URL is duplicated.
	(w3m-home-page): Changed official emacs-w3m page's address to
	namazu.org.

2001-03-02  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Renamed w3m-http-* to w3m-w3m-* in order to prepare name
	space of symbols processing HTTP protocol directly, and fix for
	cookie.
	(w3m-w3m-check-header): Renamed from `w3m-http-check-header'.
	(w3m-w3m-retrieve): Renamed from `w3m-http-retrieve' and added
	code to remove cookies.
	(w3m-retrieve): Follow changes of fuction name.
	(w3m-download): Likewise and changed argument spec.
	(w3m-exec): Changed argument spec.
	(w3m-goto-url): Changed reload scheme,
	(w3m-fontify): Move point to the top of the buffer before delete
	<?xml ... ?> tag.

2001-03-02  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (TOP): Changed code to detect XEmacs and add to define
	`find-coding-system'.
	(w3m-backlog-setup): Changed caching data format.
	(w3m-backlog-enter): Ditto and changed argument spec.
	(w3m-backlog-request): Ditto and changed spec of return value.
	(w3m-http-retrieve): Access backlog in this function and changed
	argument spec.
	(w3m-retrieve): Changed argument spec.
	(w3m-exec): Clean up and chaned spec of return value.
	(w3m-goto-url): Follow changes in `w3m-exec'.
	(w3m-decode-buffer): Clean up.
	(w3m-process-temp-file): New variable to suppress byte-compile warning.
	(w3m-external-view): Use w3m-process-temp-file to suppress
	byte-compile warning.
	(w3m): Change `mode-line-buffer-identification'.

2001-03-02  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-home-page): Initialize as URL.

2001-03-02  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el: Correcting wrong use of cygwin type filename usage,
	using dolist macro, adding handling codes html character entities,
	correct bug of w3m-view-bookmark on win32 environment,
	fixing some small bugs, etc.
	(w3m-url-to-file-name): New function.
	(w3m-expand-file-name-as-url): Renamed from w3m-expand-file-name.
	(w3m-bookmark-file): Initialize as native filename format.
	(w3m-arrived-urls-file): Likewise.
	(w3m-charset-coding-system-alist): Use dolist macro.
	(w3m-entity-alist): New constant.
	(w3m-entity-db): New variable.
	(w3m-entity-db-size): New variable.
	(w3m-entity-db-setup): New function.
	(w3m-entity-value): New function
	(w3m-fontify): Refine html character entity decoding.
	Use dolist macro. Some bug fix.
	(w3m-exec-get-user): Simplify using dolist macro.
	(w3m-bookmark-save): Likewise.
	(w3m-local-content-type): Likewise.
	(w3m-local-retrieve): Fix filename handling considering cygwin
	convention by using w3m-local-file-name function.
	(w3m-http-retrieve): Buf fix.
	(w3m-rendering-region): Bug fix, use w3m-current-url.
	(w3m-view-bookmark): Use w3m to do initialize on interactive call.
	(w3m-find-file): Fix for renamed function.

2001-03-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Merge changes on `url' branch to main trunk.

2001-03-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-home-page): Changed to official w3m.el page.
	(w3m-anchor-face): Changed default face in dark backgraound.
	(w3m-arrived-anchor-face): Ditto.
	(w3m-download): Fix typo.
	(w3m-content-type-alist): Accept .png file.
	(w3m-external-view): Fix typo.
	(w3m-view-image): Fix.

2001-03-01  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* mew-w3m.el: New file to use w3m with Mew.

2001-03-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* mime-w3m.el: New file to use w3m with SEMI.

	* w3m.el (w3m-message): New function.
	(w3m-verbose): New variable.
	(w3m-process-message): Ditto.
	(w3m-process-url): Removed.
	(w3m-exec-process): Add code to show progress status.
	(w3m-exec-filter): Fix prompt bug and clean up codes.
	(w3m-retrieve): Changed arguments spec.
	(w3m-local-retrieve): Ditto.
	(w3m-http-retrieve): Ditto.
	(w3m-pretty-length): New function.
	(w3m-rendering-region): Add code to show progress status.

2001-03-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-http-retrieve): Add adhoc fragment to avoid new-line
	replacement.
	(w3m-decode-buffer): Renamed from w3m-html-decode-buffer.

2001-02-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-content-type-alist): Accept .htm as text/html.
	(w3m-backlog-enter): Add code to memory w3m-current-title.
	(w3m-backlog-request): Resume w3m-current-title from backlog data.
	(w3m-html-decode-buffer): Change arguments spec.
	(w3m-rendering-region): Removed code to set w3m-current-url.
	(w3m-exec): Fix bug of proecessing text/plain files and changed
	data format to preserve in backlog.

2001-02-28  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el: Support XEmacs using APEL.
	(w3m-fontify): Delete <?XML ... ?> tag for XHTML page.
	(w3m-input-url): Do not use 7th arg of completing-read
	for XEmacs support.
	(w3m-bookmark-save): Check bookmark file is writable.

2001-02-28  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-bookmark-add): Fix problem of adding bookmark first
	time.

2001-02-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Reconstructed drastically and removed w3 depended codes.

2001-02-28  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-executable-type): New variable.
	(w3m-cygwin-path): New function.
	(w3m-region): New function.

2001-02-26  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-fontify): Add code to decode w3m-specific extended
	charcters.
	(w3m-extended-charcters-table): New constant.

2001-02-08  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-async-exec): New customizable variable.
	(w3m-exec-process): Use 'w3m-async-exec' instead of 'w3m-process-type'.

2001-02-07  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el: Fixed small and thoughtless bugs...
	(w3m-bookmark-file-modified-p): Bug fix.
	(w3m-bookmark-save): Bug fix. Don't forget time stamp updating.
	(w3m-bookmark-add): Bug fix. Function name miss-typing.

2001-02-07  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el: Add bookmark operations. This feature is very ad-hoc.
	Support loading w3m's bookmark file into internal bookmark data,
	adding new entry interactively, and saving data as w3m's bookmark
	file format.
	(w3m-bookmark-file-coding-system): New user varible.
	(w3m-bookmark-data): New internal variable.
	(w3m-bookmark-file-time-stamp): ditto.
	(w3m-bookmark-section-history): ditto.
	(w3m-bookmark-title-history): ditto.
	(w3m-mode-map): Add bookmark operation functions to mode map.
	(w3m-bookmark-file-modified-p): New function.
	(w3m-bookmark-parse): ditto.
	(w3m-bookmark-load): ditto.
	(w3m-bookmark-save): ditto.
	(w3m-bookmark-data-prepare): ditto.
	(w3m-bookmark-add): ditto.
	(w3m-bookmark-add-this-url): ditto.
	(w3m-bookmark-add-current-url): ditto.

2000-12-12  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-sub-list, w3m-load-list, w3m-save-list): New utility
	function.
	(w3m-arrived-list-load): Refine and move out common code into
	w3m-load-list.
	(w3m-arrived-list-save): Refine and move out common code into
	w3m-save-list and w3m-sub-list. (Previous code had side effect
	of nreverse).

2000-12-10  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* makepatch.pl, Makefile, .cvsignore: New files.

2000-10-26  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-view-this-url): Chang optinal argument 'arg'.
	(w3m-next-anchor, w3m-previous-anchor): Bind 'pos'.
	(w3m-fontify): Put mouse-face at anchor and image property.
	(w3m-mouse-view-this-url): Handling 'w3m-image property.

2000-10-20  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-process-type): Change default valule to 'start-process.
	(w3m-process-user-counter): New buffer local variable.
	(w3m-exec-get-user): New funciton, get user and passwd from
	w3m-arrived-user-list.
	(w3m-exec-filter): Use w3m-exec-get-user().

2000-10-18  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-view-previous-point): New function.
	(w3m-expand-url): If BASE is nil, it set "".
	(w3m-download-this-url): w3m-refontify-anchor() exec when finished
	download.

2000-10-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-arrived-ct-file, w3m-arrived-file-cs,
	w3m-always-html-url-regex): New variables.
	(w3m-process-type): Change name from w3m-exec-process-type.
	(w3m-refontify-anchor): New funcition.
	(w3m-exec): Pre-check content-type.
	(w3m-exec-w3m-ctcheck): New funcition, check context-type for URL.
	(w3m-exec-w3m): New funcion, execute w3m.
	(w3m-exec-ftp): New function, execute dired-other-window() or
	copy-file(), if URL is 'ftp://'.
	(w3m-convert-ftp-to-emacsen): Change 'ftp://' to '/user@host:/' from
	elisp ML.
	(w3m-download-this-url, w3m-save-image, w3-view-image): Use w3
	features.

2000-10-12  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (top-level): Add authors.
	(w3m-expand-url): Check relative URL first.
	(w3m-fontify): Add original text properties when replace 'escaped
	character'.

2000-10-11  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-mailto-url-function, w3m-use-cygdrive,
	w3m-default-save-dir, w3m-arrived-list-file, w3m-arrived-list-keep,
	w3m-arrived-anchor-face, w3m-exec-process-type,
	w3m-process-connection-type, w3m-arrived-anchor-list):
	New user custumize variables.
	(w3m-mode): Change doc-string for key binding.
	(w3m-arrived-list-add, w3m-arrived-list-load, w3m-arrived-list-save):
	New functions for handling arrived anchor.
	(w3m-fontify): Add arrived anchor face.
	(w3m-exec-process, w3m-exec-filter, w3m-exec-sentinel): New functions
	for asynchronous w3m execution.
	(w3m-find-file, w3m-read-file-name, w3m-read-passwd):
	New miscellaneous functions.
	(w3m-expand-file-name): Support old cygwin.
	(w3m-view-current-url-with-external-browser): If w3m-browser-command
	is function, funcall it.
	(w3m-mailto-url): If w3m-mailto-url-function is function, funcall it.
	(w3m-mode-map): If running xemacs, use (button2) instead of (mouse-2).

2000-09-21  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m): Cancel last change, use switch-to-buffer again.

2000-09-20  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m): Do not switch buffer if w3m window already exists.

2000-09-20  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Add declaration of dependency on APEL.
	(w3m-quit): When other w3m buffers exist, don't destruct cache.
	(w3m-browse-url): New function.

2000-09-20  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-command-arguments): Remove option -m, that's not good
	for bookmark / local file handling.

2000-09-19  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-command-arguments): Add -m option explicitly.
	(w3m-exec): Ad-hoc change to view .txt object. It's temporary
	fix. Should we consider type? w3m option -dump_head may help us.
	(w3m-exec): Get title and remove both format <title_alt> and
	<title>.
	(w3m-view-this-url): Force reloading by prefix.
	(w3m-view-current-url-with-external-browser): Works correctly.
	(w3m-print-current-url): Push url to kill king to paste later.
	(w3m-print-this-url): ditto.
	(w3m-mailto-url): Use rfc2368.el instead of mailto.el.
	(w3m-goto-url): Add 2nd argument RELOAD to withdraw data cached on
	emacs.
	(w3m-reload-this-page): Simplified by using new w3m-goto-url.
	(w3m): Set mode-line-buffer-identification after changing major
	mode because it overwrite that variable.

2000-09-19  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-fontify): Add code to handle irregular ordered
	elements of anchor tags.
	(w3m-mailto-url): Adopt for Emacs-19.
	(w3m-input-url): Call `w3m-backlog-setup' to initialize
	`w3m-backlog-hashtb'.

2000-09-19  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m): Sorry, over paren.

2000-09-18  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-exec): Get title correctly within -halfdump format
	of w3m.
	(w3m-mouse-view-this-url): New function to view page by clicking
	mouse middle button.
	(w3m-mode-map): Assign mouse middle button to view page.
	(w3m): Change mode-line spec to show title of current page.

2000-09-18  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Add authors.

2000-09-18  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-input-url): Enter url with completion. Candidates
	are visited url kept in w3m-backlog-hashtb.
	(w3m-backlog-setup): Change hash size as prime number and
	initialized with value 0 for obarray.
	(w3m-backlog-remove): Remove unused 2nd arg NUMBER and remove when
	block to check NUMBER.
	(w3m-exec): Show message "Loading..." while loading.
	(w3m-save-position): New function to keep display position in
	Emacs window into hash symbol, but I think this is not best way.
	(w3m-restore-position): New function to restore display position.
	(w3m-view-previous-page): Restore display position.
	(w3m-expand-url): Canonicalize url, ex. "http://www.host.org" to
	"http://www.host.org/".  Change regexp to allow "mailto:"
	protocol.  Remove drive letter as side-effect using
	expand-file-name to expand url for Win32 emacen.
	(w3m-expand-file-name): New function to alternates
	expand-file-name function with convert drive letter prefixed path
	to cygwin path.  i.e. c:/users/home to /cygdrive/c/users/home
	(w3m-view-bookmark): Expand bookmark filename as cygwin path
	format to pass to w3m.
	(w3m-mode-map): Add new key binding 'B' to back to previous page.
	Add new key binding 'R' to force reloading current page.
	(w3m-mailto-url): New function to support mailto: protocol.  It
	use rfc2368.el if available.
	(w3m-goto-url): Ad-hoc support mailto: protocol. We should
	consider more...
	(w3m-reload-this-page): New function to reload current page.

2000-09-18  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m): Add 2nd arguemnt to use with browse url.  This is
	patch from Satoru Takabayashi <satoru-t@is.aist-nara.ac.jp> in
	ELF-ML, Seq# 875.
	(w3m-fontify): Change regexp for <a ...> tag to allow newline in
	between attributes.  This is patch from Satoru Takabayashi
	<satoru-t@is.aist-nara.ac.jp> in ELF-ML, Seq# 876.
	(w3m-fontify): Allow un-ended tag for name attribute, is it w3m
	bug?).  This is Patch from Satoru Takabayashi
	<satoru-t@is.aist-nara.ac.jp> in ELF-ML, Seq# 876.

2000-07-13  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Added handling of name anchors. Add comments.

2000-07-12  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Improved to handle multi buffer. Fix broken cache and
	order of fontify.

2000-07-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Handle &-sequence. Add history and cache.

2000-06-25  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: New file.
